ChatGPT
ë‚˜ì˜ ë§:
sign app í•˜ëŠ” ì¤‘ì— Warning: Unexpected input(s) 'signingKeyPath', valid inputs are ['releaseDirectory', 'signingKeyBase64', 'alias', 'keyStorePassword', 'keyPassword']
Run r0adkll/sign-android-release@v1
  with:
    releaseDirectory: app/build/outputs/apk/full/release
    signingKeyPath: android-auto-key.keystore
    alias: key
    keyStorePassword: 01093030445aA
    keyPassword: 01093030445aA
  env:
    JAVA_HOME: /opt/hostedtoolcache/Java_Temurin-Hotspot_jdk/21.0.6-7/x64
    JAVA_HOME_21_X64: /opt/hostedtoolcache/Java_Temurin-Hotspot_jdk/21.0.6-7/x64
    BUILD_TOOL_VERSION: 35.0.1
    BUILD_TOOLS_VERSION: 35.0.1
Preparing to sign key @ app/build/outputs/apk/full/release with signing key
Found 1 release files.
/usr/local/lib/android/sdk/build-tools/35.0.1/zipalign -c -v 4 app/build/outputs/apk/full/release/app-full-release-unsigned.apk
Verifying alignment of app/build/outputs/apk/full/release/app-full-release-unsigned.apk (4)...
      87 META-INF/com/android/build/gradle/app-metadata.properties (OK - compressed)
     208 META-INF/version-control-info.textproto (OK - compressed)
     384 assets/dexopt/baseline.prof (OK)
    4880 assets/dexopt/baseline.profm (OK)
    5288 classes.dex (OK)
 9075496 classes2.dex (OK)
20113924 classes3.dex (OK)
28870172 classes4.dex (OK) ì´ëŸ¬ë©´ì„œ ë°‘ìœ¼ë¡œëŠ” ì­‰ ok ê°€ ë‚˜ì˜¤ëŠ”ë° ë­ê°€ ì˜ëª»ëœê±°ì§€?
ChatGPTì˜ ë§:
signingKeyPath ì˜µì…˜ì´ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤. r0adkll/sign-android-release@v1 ì•¡ì…˜ì—ì„œëŠ” signingKeyPath ëŒ€ì‹  signingKeyBase64ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

í•´ê²° ë°©ë²•
signingKeyPath ëŒ€ì‹  signingKeyBase64ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.
.keystore íŒŒì¼ì„ Base64ë¡œ ì¸ì½”ë”©í•˜ì—¬ signingKeyBase64ì— ì…ë ¥í•˜ì„¸ìš”.
Base64 ë³€í™˜ ë°©ë²• (ë¡œì»¬ì—ì„œ ì‹¤í–‰)
í„°ë¯¸ë„ì—ì„œ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”.

sh
ë³µì‚¬
í¸ì§‘
base64 android-auto-key.keystore > android-auto-key.keystore.b64
ê·¸ í›„ android-auto-key.keystore.b64 íŒŒì¼ì˜ ë‚´ìš©ì„ ë³µì‚¬í•˜ì—¬ GitHub Actionsì˜ signingKeyBase64ì— ì…ë ¥í•˜ë©´ ë©ë‹ˆë‹¤.

ìˆ˜ì •ëœ GitHub Actions ì„¤ì •:
yaml
ë³µì‚¬
í¸ì§‘
- name: Sign app APK
  uses: r0adkll/sign-android-release@v1
  with:
    releaseDirectory: app/build/outputs/apk/full/release
    signingKeyBase64: ${{ secrets.SIGNING_KEY }}
    alias: key
    keyStorePassword: ${{ secrets.KEYSTORE_PASSWORD }}
    keyPassword: ${{ secrets.KEY_PASSWORD }}
ì´í›„ GitHub Secretsì—

SIGNING_KEY: Base64ë¡œ ë³€í™˜í•œ í‚¤
KEYSTORE_PASSWORD: keystore ë¹„ë°€ë²ˆí˜¸
KEY_PASSWORD: key ë¹„ë°€ë²ˆí˜¸
ë¥¼ ì¶”ê°€í•œ í›„ ë‹¤ì‹œ ì‹¤í–‰í•˜ë©´ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•  ê²ƒì…ë‹ˆë‹¤. ğŸš€






ë‚˜ì˜ ë§:
name: Android CI

on:
  push:
    branches: [ "master" ]
  pull_request:
    branches: [ "master" ]
  workflow_dispatch:

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3

    - name: Set up JDK 21
      uses: actions/setup-java@v3
      with:
        java-version: '21'
        distribution: 'temurin'
        cache: gradle

    - name: Generate Keystore
      run: |
        keytool -genkeypair -v \
          -keystore android-auto-key.keystore \
          -storetype JKS \
          -alias key \
          -keyalg RSA -keysize 2048 -validity 10000 \
          -dname "CN=Android, OU=Mobile, O=Company, L=City, ST=State, C=US" \
          -storepass "01093030445aA" \
          -keypass "01093030445aA"

    - name: Build release APK
      run: ./gradlew app:assembleFullRelease

    - name: Setup build tool version variable
      shell: bash
      run: |
        BUILD_TOOL_VERSION=$(ls /usr/local/lib/android/sdk/build-tools/ | tail -n 1)
        echo "BUILD_TOOL_VERSION=$BUILD_TOOL_VERSION" >> $GITHUB_ENV
        echo Last build tool version is: $BUILD_TOOL_VERSION
        
    - name: Sign App
      uses: r0adkll/sign-android-release@v1
      id: sign_app
      with:
        releaseDirectory: app/build/outputs/apk/full/release
        signingKeyPath: android-auto-key.keystore
        alias: 'key'
        keyStorePassword: '01093030445aA'
        keyPassword: '01093030445aA'
      env:
        BUILD_TOOLS_VERSION: ${{ env.BUILD_TOOL_VERSION }}

    - name: Align APK
      run: |
        $ANDROID_HOME/build-tools/$BUILD_TOOLS_VERSION/zipalign -v 4 \
          app/build/outputs/apk/full/release/app-full-release-unsigned.apk \
          app/build/outputs/apk/full/release/app-full-release.apk

    - name: Upload APK Release
      uses: actions/upload-artifact@v4
      with:
        name: APK release generated
        path: app/build/outputs/apk/full/release ì—¬ê¸°ì— ìˆ˜ì •ì‚¬í•­ ë„£ì–´ì¤˜
ChatGPTì˜ ë§:
ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í•˜ë©´ signingKeyPathë¥¼ signingKeyBase64ë¡œ ë³€ê²½í•˜ê³ , Keystoreë¥¼ GitHub Secretsì—ì„œ ê´€ë¦¬í•˜ë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ğŸ”¹ ìˆ˜ì • ì‚¬í•­:
Keystoreë¥¼ ì§ì ‘ ìƒì„±í•˜ì§€ ì•Šê³  GitHub Secretsì—ì„œ ê°€ì ¸ì™€ ì‚¬ìš©í•˜ë„ë¡ ë³€ê²½ (signingKeyBase64 ì‚¬ìš©).
BUILD_TOOLS_VERSIONì„ BUILD_TOOL_VERSIONìœ¼ë¡œ ë§ì¶¤.
zipalign ë° apksigner ì ìš© í›„ -signed ë²„ì „ ìƒì„±.
APK ì—…ë¡œë“œ ì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œ ì§€ì •.
âœ¨ ìˆ˜ì •ëœ Android CI GitHub Actions:
yaml
ë³µì‚¬
í¸ì§‘
name: Android CI

on:
  push:
    branches: [ "master" ]
  pull_request:
    branches: [ "master" ]
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3

    - name: Set up JDK 21
      uses: actions/setup-java@v3
      with:
        java-version: '21'
        distribution: 'temurin'
        cache: gradle

    - name: Build release APK
      run: ./gradlew app:assembleFullRelease

    - name: Setup build tool version variable
      shell: bash
      run: |
        BUILD_TOOLS_VERSION=$(ls /usr/local/lib/android/sdk/build-tools/ | tail -n 1)
        echo "BUILD_TOOLS_VERSION=$BUILD_TOOLS_VERSION" >> $GITHUB_ENV
        echo Last build tool version is: $BUILD_TOOLS_VERSION

    - name: Sign App
      uses: r0adkll/sign-android-release@v1
      id: sign_app
      with:
        releaseDirectory: app/build/outputs/apk/full/release
        signingKeyBase64: ${{ secrets.SIGNING_KEY }}
        alias: 'key'
        keyStorePassword: ${{ secrets.KEYSTORE_PASSWORD }}
        keyPassword: ${{ secrets.KEY_PASSWORD }}
      env:
        BUILD_TOOLS_VERSION: ${{ env.BUILD_TOOLS_VERSION }}

    - name: Align APK
      run: |
        $ANDROID_HOME/build-tools/$BUILD_TOOLS_VERSION/zipalign -v 4 \
          app/build/outputs/apk/full/release/app-full-release-unsigned.apk \
          app/build/outputs/apk/full/release/app-full-release-aligned.apk

    - name: Sign APK using apksigner
      run: |
        $ANDROID_HOME/build-tools/$BUILD_TOOLS_VERSION/apksigner sign --ks /tmp/keystore.jks \
          --ks-key-alias key --ks-pass pass:${{ secrets.KEYSTORE_PASSWORD }} \
          --key-pass pass:${{ secrets.KEY_PASSWORD }} \
          --out app/build/outputs/apk/full/release/app-full-release-signed.apk \
          app/build/outputs/apk/full/release/app-full-release-aligned.apk

    - name: Upload APK Release
      uses: actions/upload-artifact@v4
      with:
        name: APK release generated
        path: app/build/outputs/apk/full/release/app-full-release-signed.apk
âœ… ë³€ê²½ ë° ê°œì„  ì‚¬í•­
Keystore ê´€ë¦¬ ê°œì„ 
GitHub Secretsì—ì„œ Base64 ì¸ì½”ë”©ëœ SIGNING_KEYë¥¼ ì‚¬ìš©.
ë³´ì•ˆ ê°•í™”ë¥¼ ìœ„í•´ .keystore íŒŒì¼ì„ ì§ì ‘ ìƒì„±í•˜ì§€ ì•ŠìŒ.
Signing Key ì˜¤ë¥˜ ìˆ˜ì •
signingKeyPath â†’ signingKeyBase64ë¡œ ë³€ê²½ (signingKeyPathëŠ” ì§€ì›ë˜ì§€ ì•ŠìŒ).
APK ì •ë ¬ (zipalign) ë° ì„œëª… (apksigner) ê°œì„ 
zipalignì„ ì‹¤í–‰í•˜ì—¬ APKê°€ ì •ë ¬ë˜ë„ë¡ ìˆ˜ì •.
apksignerë¡œ ìµœì¢… ì„œëª…í•˜ì—¬ ë°°í¬í•  APK ìƒì„±.
ì—…ë¡œë“œ ê²½ë¡œ ëª…í™•í™”
app-full-release-signed.apkë¥¼ ìµœì¢… ì‚°ì¶œë¬¼ë¡œ ì„¤ì •í•˜ì—¬ ì—…ë¡œë“œ.
ì´ì œ GitHub Secretsì— ë‹¤ìŒ í•­ëª©ì„ ì¶”ê°€í•˜ë©´ ì •ìƒì ìœ¼ë¡œ ë¹Œë“œê°€ ì™„ë£Œë  ê±°ì˜ˆìš”.

Secret Name	ì„¤ëª…
SIGNING_KEY	Base64ë¡œ ì¸ì½”ë”©ëœ keystore íŒŒì¼
KEYSTORE_PASSWORD	keystore ë¹„ë°€ë²ˆí˜¸
KEY_PASSWORD	key ë¹„ë°€ë²ˆí˜¸
ì´ì œ ë‹¤ì‹œ ì‹¤í–‰í•´ë³´ë©´ ì •ìƒì ìœ¼ë¡œ APKê°€ ì„œëª…ë  ê±°ì˜ˆìš”! ğŸš€ğŸ”¥






ë‚˜ì˜ ë§:
r0adkll/sign-android-release@v1
  with:
    releaseDirectory: app/build/outputs/apk/full/release
    signingKeyBase64: ***
    alias: key
  env:
    JAVA_HOME: /opt/hostedtoolcache/Java_Temurin-Hotspot_jdk/21.0.6-7/x64
    JAVA_HOME_21_X64: /opt/hostedtoolcache/Java_Temurin-Hotspot_jdk/21.0.6-7/x64
    BUILD_TOOLS_VERSION: 35.0.1
Preparing to sign key @ app/build/outputs/apk/full/release with signing key
Found 1 release files.
/usr/local/lib/android/sdk/build-tools/35.0.1/zipalign -c -v 4 app/build/outputs/apk/full/release/app-full-release-unsigned.apk
Verifying alignment of app/build/outputs/apk/full/release/app-full-release-unsigned.apk (4)... ì´ê±° í–ˆë”ë‹ˆ Failed to load signer "signer #1"
java.io.IOException: DerInputStream.getLength(): lengthTag=111, too big.
	at java.base/sun.security.util.DerInputStream.getLength(DerInputStream.java:252)
	at java.base/sun.security.util.DerValue.<init>(DerValue.java:448)
	at java.base/sun.security.util.DerValue.<init>(DerValue.java:491)
	at java.base/sun.security.pkcs12.PKCS12KeyStore.engineLoad(PKCS12KeyStore.java:1953)
	at java.base/sun.security.util.KeyStoreDelegator.engineLoad(KeyStoreDelegator.java:228)
	at java.base/java.security.KeyStore.load(KeyStore.java:1500)
	at com.android.apksigner.SignerParams.loadKeyStoreFromFile(SignerParams.java:423)
	at com.android.apksigner.SignerParams.loadPrivateKeyAndCertsFromKeyStore(SignerParams.java:309)
	at com.android.apksigner.SignerParams.loadPrivateKeyAndCerts(SignerParams.java:237)
	at com.android.apksigner.ApkSignerTool.getSignerConfig(ApkSignerTool.java:449)
	at com.android.apksigner.ApkSignerTool.sign(ApkSignerTool.java:362)
	at com.android.apksigner.ApkSignerTool.main(ApkSignerTool.java:94)
Error: The process '/usr/local/lib/android/sdk/build-tools/35.0.1/apksigner' failed with exit code 2 ì´ë ‡ê²Œ ì—ëŸ¬ê°€ ë‚˜ì™€
ChatGPTì˜ ë§:
Failed to load signer "signer #1" ë° DerInputStream.getLength(): lengthTag=111, too big. ì˜¤ë¥˜ëŠ” ì£¼ë¡œ Keystore íŒŒì¼ì´ ì†ìƒë˜ì—ˆê±°ë‚˜ Base64 ë””ì½”ë”© ê³¼ì •ì—ì„œ ë¬¸ì œê°€ ë°œìƒí–ˆì„ ë•Œ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.

ğŸ” ë¬¸ì œ ì›ì¸
SIGNING_KEY (Base64 Keystore) íŒŒì¼ì´ ì˜ëª» ì¸ì½”ë”©ë¨

Base64ë¡œ ë³€í™˜í•˜ëŠ” ê³¼ì •ì—ì„œ ê¹¨ì¡Œì„ ê°€ëŠ¥ì„±ì´ ìˆìŒ.
ì˜ëª»ëœ í¬ë§·ìœ¼ë¡œ ì¸í•´ apksignerê°€ Keystoreë¥¼ ë¡œë“œí•˜ì§€ ëª»í•¨.
Base64 ì¸ì½”ë”© ì‹œ ê°œí–‰ ë¬¸ì œ ë°œìƒ

base64 ì¸ì½”ë”© ì‹œ ìë™ ê°œí–‰ì´ í¬í•¨ë  ê²½ìš°, ë””ì½”ë”© ê³¼ì •ì—ì„œ ì˜¤ë¥˜ ë°œìƒ ê°€ëŠ¥.
ì¼ë¶€ í™˜ê²½ì—ì„œëŠ” -w 0 ì˜µì…˜ì„ ì‚¬ìš©í•´ì•¼ í•¨.
Keystoreê°€ PKCS12 í˜•ì‹ì´ ì•„ë‹Œ JKS í˜•ì‹ì´ì–´ì•¼ í•¨

KeystoreëŠ” JKS í¬ë§·ì´ì–´ì•¼ í•˜ë©°, PKCS12 í˜•ì‹ì´ë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•  ìˆ˜ ìˆìŒ.
ğŸ›  í•´ê²° ë°©ë²•
âœ… 1. Keystoreë¥¼ ì˜¬ë°”ë¥´ê²Œ Base64ë¡œ ì¸ì½”ë”©í•˜ê¸°
ë¡œì»¬ì—ì„œ .keystore íŒŒì¼ì„ ë‹¤ì‹œ Base64ë¡œ ë³€í™˜í•˜ì„¸ìš”.

sh
ë³µì‚¬
í¸ì§‘
base64 -w 0 android-auto-key.keystore > android-auto-key.keystore.b64
âš  -w 0 ì˜µì…˜ì€ ê°œí–‰ ì—†ì´ í•œ ì¤„ë¡œ ë³€í™˜í•˜ëŠ” ì˜µì…˜ì…ë‹ˆë‹¤.

âœ… 2. ë³€í™˜ëœ Keystore Base64 ë‚´ìš©ì„ í™•ì¸í•˜ê¸°
ë³€í™˜ëœ íŒŒì¼(android-auto-key.keystore.b64)ì´ ì •ìƒì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ë ¤ë©´:

sh
ë³µì‚¬
í¸ì§‘
cat android-auto-key.keystore.b64
âœ… 3. GitHub Secretsì— ë‹¤ì‹œ ë“±ë¡í•˜ê¸°
android-auto-key.keystore.b64 íŒŒì¼ì˜ ë‚´ìš©ì„ ë³µì‚¬.
GitHub Actions Secretsì—ì„œ SIGNING_KEY ê°’ì„ ê¸°ì¡´ ê°’ì„ ì‚­ì œí•˜ê³  ìƒˆ ê°’ìœ¼ë¡œ ë³€ê²½.
âœ… 4. GitHub Actions YAML íŒŒì¼ ìˆ˜ì •
ì•„ë˜ì™€ ê°™ì´ signingKeyBase64 ê°’ë§Œ ë³€ê²½í•˜ê³  ë‹¤ì‹œ ì‹¤í–‰í•˜ì„¸ìš”.

yaml
ë³µì‚¬
í¸ì§‘
- name: Sign App
  uses: r0adkll/sign-android-release@v1
  id: sign_app
  with:
    releaseDirectory: app/build/outputs/apk/full/release
    signingKeyBase64: ${{ secrets.SIGNING_KEY }}
    alias: 'key'
    keyStorePassword: ${{ secrets.KEYSTORE_PASSWORD }}
    keyPassword: ${{ secrets.KEY_PASSWORD }}
ğŸš€ ë‹¤ì‹œ ì‹¤í–‰í•˜ê¸°
Keystore íŒŒì¼ì„ ë‹¤ì‹œ Base64 ë³€í™˜
GitHub Secretsì—ì„œ SIGNING_KEY ê°’ì„ ìƒˆ ê°’ìœ¼ë¡œ êµì²´
GitHub Actionsë¥¼ ë‹¤ì‹œ ì‹¤í–‰
ì´ì œ ì •ìƒì ìœ¼ë¡œ ì„œëª…ì´ ë  ê±°ì˜ˆìš”! ğŸš€ğŸ”¥






ë‚˜ì˜ ë§:
Failed to load signer "signer #1"
java.io.IOException: Tag number over 30 is not supported
	at java.base/sun.security.util.DerValue.<init>(DerValue.java:446)
	at java.base/sun.security.util.DerValue.<init>(DerValue.java:491)
	at java.base/sun.security.pkcs12.PKCS12KeyStore.engineLoad(PKCS12KeyStore.java:1953)
	at java.base/sun.security.util.KeyStoreDelegator.engineLoad(KeyStoreDelegator.java:228)
	at java.base/java.security.KeyStore.load(KeyStore.java:1500)
	at com.android.apksigner.SignerParams.loadKeyStoreFromFile(SignerParams.java:423)
	at com.android.apksigner.SignerParams.loadPrivateKeyAndCertsFromKeyStore(SignerParams.java:309)
	at com.android.apksigner.SignerParams.loadPrivateKeyAndCerts(SignerParams.java:237)
	at com.android.apksigner.ApkSignerTool.getSignerConfig(ApkSignerTool.java:449)
	at com.android.apksigner.ApkSignerTool.sign(ApkSignerTool.java:362)
	at com.android.apksigner.ApkSignerTool.main(ApkSignerTool.java:94)
Error: The process '/usr/local/lib/android/sdk/build-tools/35.0.1/apksigner' failed with exit code 2 ì´ê±´ ë­ë–„ë¬¸ì¼ê¹Œ?
ChatGPTì˜ ë§:
Tag number over 30 is not supported ì˜¤ë¥˜ëŠ” ì£¼ë¡œ Keystore íŒŒì¼ í˜•ì‹ì´ ì˜ëª»ë˜ì—ˆê±°ë‚˜ Base64 ì¸ì½”ë”© ê³¼ì •ì—ì„œ ì†ìƒë˜ì—ˆì„ ë•Œ ë°œìƒí•©ë‹ˆë‹¤.

ğŸ” ì›ì¸ ë¶„ì„
Keystoreê°€ PKCS12(PFX) í˜•ì‹ìœ¼ë¡œ ìƒì„±ë¨

keytoolì„ ì‚¬ìš©í•  ë•Œ -storetype PKCS12 ì˜µì…˜ì´ ìë™ìœ¼ë¡œ ì ìš©ë˜ì—ˆì„ ê°€ëŠ¥ì„±ì´ ìˆìŒ.
í•˜ì§€ë§Œ apksignerëŠ” JKS(Java Keystore) í˜•ì‹ë§Œ ì§€ì›í•¨.
Base64 ì¸ì½”ë”© ë¬¸ì œ

Base64ë¡œ ë³€í™˜í•  ë•Œ ê°œí–‰ì´ í¬í•¨ë˜ì—ˆê±°ë‚˜ ì¸ì½”ë”©ì´ ê¹¨ì¡Œì„ ìˆ˜ ìˆìŒ.
ğŸ›  í•´ê²° ë°©ë²•
âœ… 1. Keystoreë¥¼ JKS(Java Keystore) í˜•ì‹ìœ¼ë¡œ ë‹¤ì‹œ ìƒì„±í•˜ê¸°
í˜„ì¬ keytool ëª…ë ¹ì–´ì—ì„œ -storetype JKS ì˜µì…˜ì„ ëª…ì‹œì ìœ¼ë¡œ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤.

sh
ë³µì‚¬
í¸ì§‘
keytool -genkeypair -v \
  -keystore android-auto-key.keystore \
  -storetype JKS \  # JKS í˜•ì‹ ëª…ì‹œ
  -alias key \
  -keyalg RSA -keysize 2048 -validity 10000 \
  -dname "CN=Android, OU=Mobile, O=Company, L=City, ST=State, C=US" \
  -storepass "01093030445aA" \
  -keypass "01093030445aA"
âœ… 2. Keystoreë¥¼ ë‹¤ì‹œ Base64ë¡œ ë³€í™˜í•˜ê¸°
JKS í˜•ì‹ìœ¼ë¡œ ë§Œë“  android-auto-key.keystore íŒŒì¼ì„ Base64ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.

sh
ë³µì‚¬
í¸ì§‘
base64 -w 0 android-auto-key.keystore > android-auto-key.keystore.b64
Windows í™˜ê²½ì´ë¼ë©´ ë‹¤ìŒ ëª…ë ¹ì–´ ì‚¬ìš©

powershell
ë³µì‚¬
í¸ì§‘
[convert]::ToBase64String((Get-Content android-auto-key.keystore -Encoding byte)) > android-auto-key.keystore.b64
âœ… 3. GitHub Secretsì— ë‹¤ì‹œ ì—…ë¡œë“œ
android-auto-key.keystore.b64 íŒŒì¼ì„ ì—´ê³  ë‚´ìš©ì„ ë³µì‚¬í•©ë‹ˆë‹¤.
GitHub Repositoryì˜ Settings â†’ Secrets and variables â†’ Actions ì—ì„œ
SIGNING_KEY ê°’ì„ ìƒˆ Base64 ê°’ìœ¼ë¡œ ë®ì–´ì”Œì›ë‹ˆë‹¤.
KEYSTORE_PASSWORDì™€ KEY_PASSWORDë„ í™•ì¸í•˜ì„¸ìš”.
âœ… 4. GitHub Actionsì—ì„œ ë‹¤ì‹œ ì‹¤í–‰
yaml
ë³µì‚¬
í¸ì§‘
- name: Sign App
  uses: r0adkll/sign-android-release@v1
  id: sign_app
  with:
    releaseDirectory: app/build/outputs/apk/full/release
    signingKeyBase64: ${{ secrets.SIGNING_KEY }}
    alias: 'key'
    keyStorePassword: ${{ secrets.KEYSTORE_PASSWORD }}
    keyPassword: ${{ secrets.KEY_PASSWORD }}
ğŸ”¥ ë§ˆë¬´ë¦¬
Keystoreë¥¼ JKS í˜•ì‹ìœ¼ë¡œ ìƒì„± (PKCS12 ëŒ€ì‹ )
Base64 ë³€í™˜ ì‹œ -w 0 ì˜µì…˜ ì‚¬ìš©í•˜ì—¬ ê°œí–‰ ì—†ì´ ë³€í™˜
GitHub Secretsì—ì„œ SIGNING_KEY ê°’ì„ ì—…ë°ì´íŠ¸ í›„ ë‹¤ì‹œ ì‹¤í–‰
ì´ì œ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•  ê±°ì˜ˆìš”! ğŸš€ğŸ”¥






ë‚˜ì˜ ë§:
ì§€name: Android CI

on:
  push:
    branches: [ "master" ]
  pull_request:
    branches: [ "master" ]
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3

    - name: Set up JDK 21
      uses: actions/setup-java@v3
      with:
        java-version: '21'
        distribution: 'temurin'
        cache: gradle

    - name: Build release APK
      run: ./gradlew app:assembleFullRelease

    - name: Setup build tool version variable
      shell: bash
      run: |
        BUILD_TOOLS_VERSION=$(ls /usr/local/lib/android/sdk/build-tools/ | tail -n 1)
        echo "BUILD_TOOLS_VERSION=$BUILD_TOOLS_VERSION" >> $GITHUB_ENV
        echo Last build tool version is: $BUILD_TOOLS_VERSION

    - name: Sign App
      uses: r0adkll/sign-android-release@v1
      id: sign_app
      with:
        releaseDirectory: app/build/outputs/apk/full/release
        signingKeyBase64: ${{ secrets.SIGNING_KEY }}
        alias: 'key'
        keyStorePassword: ${{ secrets.KEYSTORE_PASSWORD }}
        keyPassword: ${{ secrets.KEY_PASSWORD }}
      env:
        BUILD_TOOLS_VERSION: ${{ env.BUILD_TOOLS_VERSION }}

    - name: Align APK
      run: |
        $ANDROID_HOME/build-tools/$BUILD_TOOLS_VERSION/zipalign -v 4 \
          app/build/outputs/apk/full/release/app-full-release-unsigned.apk \
          app/build/outputs/apk/full/release/app-full-release-aligned.apk

    - name: Sign APK using apksigner
      run: |
        $ANDROID_HOME/build-tools/$BUILD_TOOLS_VERSION/apksigner sign --ks /tmp/keystore.jks \
          --ks-key-alias key --ks-pass pass:${{ secrets.KEYSTORE_PASSWORD }} \
          --key-pass pass:${{ secrets.KEY_PASSWORD }} \
          --out app/build/outputs/apk/full/release/app-full-release-signed.apk \
          app/build/outputs/apk/full/release/app-full-release-aligned.apk

    - name: Upload APK Release
      uses: actions/upload-artifact@v4
      with:
        name: APK release generated
        path: app/build/outputs/apk/full/release/app-full-release-signed.apk ì§€ê¸ˆ ë‚´ê°€ ì•Œê¸°ë¡  ê·¸ëƒ¥ key store íŒŒì¼ ë§Œë“¤ì–´ì„œ ê·¸ê±¸ ë°”ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒìœ¼ë¡œ í•œê²ƒ ê°™ì€ë° ì•„ë‹ˆì•¼? 
ChatGPTì˜ ë§:
ë„¤, ì§€ê¸ˆ ì‘ì„±ëœ GitHub Actions ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë³´ë©´ Keystore íŒŒì¼ì„ ì§ì ‘ ìƒì„±í•˜ëŠ” ê³¼ì •ì´ ì—†ìŠµë‹ˆë‹¤.
ëŒ€ì‹ , GitHub Secretsì—ì„œ SIGNING_KEYë¥¼ Base64 ì¸ì½”ë”©ëœ ë¬¸ìì—´ë¡œ ë°›ì•„ì„œ ì‚¬ìš©í•˜ë ¤ê³  í•˜ê³  ìˆìŠµë‹ˆë‹¤.

í•˜ì§€ë§Œ Keystore íŒŒì¼ì„ ì‹¤ì œë¡œ ìƒì„±í•˜ëŠ” ì½”ë“œê°€ ì—†ê¸° ë•Œë¬¸ì—, ì„œëª… ê³¼ì •ì—ì„œ /tmp/keystore.jksë¥¼ ì°¾ì„ ìˆ˜ ì—†ì–´ ì˜¤ë¥˜ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ğŸ” ì§€ê¸ˆ ìŠ¤í¬ë¦½íŠ¸ì˜ ë¬¸ì œì 
Keystore íŒŒì¼ì´ ì§ì ‘ ìƒì„±ë˜ì§€ ì•ŠìŒ

SIGNING_KEY ê°’ì´ Keystore íŒŒì¼ì¸ì§€ í™•ì¸ í•„ìš”
r0adkll/sign-android-release@v1 ì•¡ì…˜ì´ ë‚´ë¶€ì ìœ¼ë¡œ Keystoreë¥¼ ë§Œë“¤ì§€ë§Œ, /tmp/keystore.jks ê²½ë¡œë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ
apksigner sign ëª…ë ¹ì–´ì—ì„œ /tmp/keystore.jksë¥¼ ì‚¬ìš©í•˜ê³  ìˆìŒ

r0adkll/sign-android-release@v1ì—ì„œ ìƒì„±ëœ Keystoreì™€ ì—°ê²°ë˜ì§€ ì•ŠìŒ
Keystore íŒŒì¼ì´ /tmp/keystore.jksì— ì—†ìœ¼ë©´ apksignerê°€ ì‹¤íŒ¨
ğŸ›  í•´ê²° ë°©ë²•
âœ… 1. GitHub Secretsì—ì„œ SIGNING_KEY ê°’ í™•ì¸
ë¨¼ì € GitHub Secretsì—ì„œ SIGNING_KEY ê°’ì´ Base64 ì¸ì½”ë”©ëœ Keystoreì¸ì§€ í™•ì¸í•˜ì„¸ìš”.

ë§Œì•½ android-auto-key.keystoreë¥¼ ì§ì ‘ GitHub Secretsì— ì €ì¥í•œ ê²ƒì´ ì•„ë‹ˆë¼ë©´, ë¡œì»¬ì—ì„œ Base64ë¡œ ë³€í™˜í•´ì„œ ë‹¤ì‹œ ì—…ë¡œë“œí•´ì•¼ í•©ë‹ˆë‹¤.
ë¡œì»¬ì—ì„œ Keystoreë¥¼ Base64ë¡œ ë³€í™˜í•˜ëŠ” ë°©ë²•:
sh
ë³µì‚¬
í¸ì§‘
base64 -w 0 android-auto-key.keystore > android-auto-key.keystore.b64
android-auto-key.keystore.b64 íŒŒì¼ì„ ì—´ì–´ ë‚´ìš©ì´ ì •ìƒì ìœ¼ë¡œ ë“¤ì–´ìˆëŠ”ì§€ í™•ì¸ í›„ GitHub Secrets â†’ SIGNING_KEY ì— ì €ì¥í•˜ì„¸ìš”.
âœ… 2. Keystore íŒŒì¼ì„ Actions ì‹¤í–‰ ì¤‘ ìƒì„±í•˜ë„ë¡ ìˆ˜ì •
í˜„ì¬ Keystore íŒŒì¼ì„ /tmp/keystore.jksë¡œ ì‚¬ìš©í•˜ê³  ìˆëŠ”ë°, GitHub Actions ì‹¤í–‰ ì¤‘ í•´ë‹¹ íŒŒì¼ì„ ìƒì„±í•˜ëŠ” ì½”ë“œê°€ í•„ìš”í•©ë‹ˆë‹¤.

ì•„ë˜ì™€ ê°™ì´ Base64ë¡œ ì¸ì½”ë”©ëœ Keystoreë¥¼ ë³µì›í•˜ëŠ” ì½”ë“œë¥¼ ì¶”ê°€í•˜ì„¸ìš”.

yaml
ë³µì‚¬
í¸ì§‘
    - name: Decode Keystore
      run: |
        echo "${{ secrets.SIGNING_KEY }}" | base64 -d > /tmp/keystore.jks
ğŸ”¹ ì´ ì½”ë“œë¥¼ Sign App ìŠ¤í… ì´ì „ì— ì¶”ê°€í•˜ì„¸ìš”.

âœ… 3. Sign App ë‹¨ê³„ì—ì„œ Keystore ê²½ë¡œ ì§€ì •
í˜„ì¬ r0adkll/sign-android-release@v1 ì•¡ì…˜ì´ signingKeyBase64 ê°’ì„ ì§ì ‘ ì²˜ë¦¬í•˜ë¯€ë¡œ /tmp/keystore.jksë¥¼ ë”°ë¡œ ë§Œë“¤ í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.
ëŒ€ì‹  signingKeyBase64ë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ë„ë¡ í•˜ë©´ ë©ë‹ˆë‹¤.

yaml
ë³µì‚¬
í¸ì§‘
    - name: Sign App
      uses: r0adkll/sign-android-release@v1
      id: sign_app
      with:
        releaseDirectory: app/build/outputs/apk/full/release
        signingKeyBase64: ${{ secrets.SIGNING_KEY }}
        alias: 'key'
        keyStorePassword: ${{ secrets.KEYSTORE_PASSWORD }}
        keyPassword: ${{ secrets.KEY_PASSWORD }}
âœ… 4. apksigner signì—ì„œ ì˜¬ë°”ë¥¸ Keystore ê²½ë¡œ ì‚¬ìš©
í˜„ì¬ apksignerì—ì„œ /tmp/keystore.jksë¥¼ ì‚¬ìš©í•˜ê³  ìˆì§€ë§Œ, ì´ íŒŒì¼ì´ ìƒì„±ë˜ì§€ ì•Šìœ¼ë©´ ì‹¤íŒ¨í•©ë‹ˆë‹¤.
ìœ„ì—ì„œ Keystore íŒŒì¼ì„ ìƒì„±í•˜ëŠ” ì½”ë“œ(Decode Keystore)ë¥¼ ì¶”ê°€í–ˆìœ¼ë¯€ë¡œ, apksignerê°€ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•  ê²ƒì…ë‹ˆë‹¤.

yaml
ë³µì‚¬
í¸ì§‘
    - name: Sign APK using apksigner
      run: |
        $ANDROID_HOME/build-tools/$BUILD_TOOLS_VERSION/apksigner sign --ks /tmp/keystore.jks \
          --ks-key-alias key --ks-pass pass:${{ secrets.KEYSTORE_PASSWORD }} \
          --key-pass pass:${{ secrets.KEY_PASSWORD }} \
          --out app/build/outputs/apk/full/release/app-full-release-signed.apk \
          app/build/outputs/apk/full/release/app-full-release-aligned.apk
ğŸš€ ìµœì¢… YAML íŒŒì¼ (ìˆ˜ì •ëœ ë²„ì „)
yaml
ë³µì‚¬
í¸ì§‘
name: Android CI

on:
  push:
    branches: [ "master" ]
  pull_request:
    branches: [ "master" ]
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3

    - name: Set up JDK 21
      uses: actions/setup-java@v3
      with:
        java-version: '21'
        distribution: 'temurin'
        cache: gradle

    - name: Build release APK
      run: ./gradlew app:assembleFullRelease

    - name: Setup build tool version variable
      shell: bash
      run: |
        BUILD_TOOLS_VERSION=$(ls /usr/local/lib/android/sdk/build-tools/ | tail -n 1)
        echo "BUILD_TOOLS_VERSION=$BUILD_TOOLS_VERSION" >> $GITHUB_ENV
        echo Last build tool version is: $BUILD_TOOLS_VERSION

    - name: Decode Keystore
      run: |
        echo "${{ secrets.SIGNING_KEY }}" | base64 -d > /tmp/keystore.jks

    - name: Sign App
      uses: r0adkll/sign-android-release@v1
      id: sign_app
      with:
        releaseDirectory: app/build/outputs/apk/full/release
        signingKeyBase64: ${{ secrets.SIGNING_KEY }}
        alias: 'key'
        keyStorePassword: ${{ secrets.KEYSTORE_PASSWORD }}
        keyPassword: ${{ secrets.KEY_PASSWORD }}

    - name: Align APK
      run: |
        $ANDROID_HOME/build-tools/$BUILD_TOOLS_VERSION/zipalign -v 4 \
          app/build/outputs/apk/full/release/app-full-release-unsigned.apk \
          app/build/outputs/apk/full/release/app-full-release-aligned.apk

    - name: Sign APK using apksigner
      run: |
        $ANDROID_HOME/build-tools/$BUILD_TOOLS_VERSION/apksigner sign --ks /tmp/keystore.jks \
          --ks-key-alias key --ks-pass pass:${{ secrets.KEYSTORE_PASSWORD }} \
          --key-pass pass:${{ secrets.KEY_PASSWORD }} \
          --out app/build/outputs/apk/full/release/app-full-release-signed.apk \
          app/build/outputs/apk/full/release/app-full-release-aligned.apk

    - name: Upload APK Release
      uses: actions/upload-artifact@v4
      with:
        name: APK release generated
        path: app/build/outputs/apk/full/release/app-full-release-signed.apk
ğŸ¯ ì •ë¦¬ (ì´ì œ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•  ê²ƒ!)
Keystoreê°€ ìƒì„±ë˜ì§€ ì•ŠëŠ” ë¬¸ì œ í•´ê²°

Decode Keystore ìŠ¤í…ì—ì„œ Base64ë¡œ ì €ì¥ëœ SIGNING_KEY ê°’ì„ ë””ì½”ë”©í•˜ì—¬ /tmp/keystore.jks ìƒì„±
Keystoreë¥¼ ì œëŒ€ë¡œ ì—°ê²°

apksignerì—ì„œ /tmp/keystore.jksë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ë„ë¡ ì„¤ì •
Secretsê°€ ì˜¬ë°”ë¥¸ì§€ í™•ì¸ í•„ìš”

SIGNING_KEY ê°’ì´ ì˜¬ë°”ë¥¸ Base64 ì¸ì½”ë”©ëœ Keystore íŒŒì¼ì¸ì§€ í™•ì¸
ì´ì œ ë‹¤ì‹œ ì‹¤í–‰í•˜ë©´ apksigner ì˜¤ë¥˜ ì—†ì´ ì •ìƒì ìœ¼ë¡œ ì„œëª…ëœ APKê°€ ìƒì„±ë  ê±°ì˜ˆìš”! ğŸš€ğŸ”¥






ë‚˜ì˜ ë§:
    - name: Generate Keystore
      run: |
        keytool -genkeypair -v\
          -keystore android-auto-key.keystore\
          -storetype JKS\
          -alias key\
          -keyalg RSA -keysize 2048 -validity 10000\
          -dname "CN=Android, OU=Mobile, O=Company, L=City, ST=State, C=US"\
          -storepass "01093030445aA"\
          -keypass "01093030445aA"  ì €ê¸°ë‹¤ê°€ ì´ë ‡ê²Œ í‚¤ ë§Œë“œëŠ”ê±¸ ë„£ì€ ë²„ì „ì€ ëª»ë§Œë“¤ì–´?
ChatGPTì˜ ë§:
ë„¤, GitHub Actionsì—ì„œ Keystore íŒŒì¼ì„ ì§ì ‘ ìƒì„±í•´ì„œ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì´ë ‡ê²Œ í•˜ë©´ GitHub Secretsë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³ ë„ Keystoreë¥¼ ë°”ë¡œ ìƒì„±í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ğŸš€ ìˆ˜ì •ëœ GitHub Actions Workflow (Keystore ì§ì ‘ ìƒì„±)
ì•„ë˜ëŠ” Keystoreë¥¼ ì‹¤í–‰ ì¤‘ì— ìƒì„±í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ìˆ˜ì •í•œ ë²„ì „ì…ë‹ˆë‹¤.

yaml
ë³µì‚¬
í¸ì§‘
name: Android CI

on:
  push:
    branches: [ "master" ]
  pull_request:
    branches: [ "master" ]
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3

    - name: Set up JDK 21
      uses: actions/setup-java@v3
      with:
        java-version: '21'
        distribution: 'temurin'
        cache: gradle

    - name: Generate Keystore
      run: |
        keytool -genkeypair -v \
          -keystore /tmp/android-auto-key.keystore \
          -storetype JKS \
          -alias key \
          -keyalg RSA -keysize 2048 -validity 10000 \
          -dname "CN=Android, OU=Mobile, O=Company, L=City, ST=State, C=US" \
          -storepass "01093030445aA" \
          -keypass "01093030445aA"

    - name: Build release APK
      run: ./gradlew app:assembleFullRelease

    - name: Setup build tool version variable
      shell: bash
      run: |
        BUILD_TOOLS_VERSION=$(ls /usr/local/lib/android/sdk/build-tools/ | tail -n 1)
        echo "BUILD_TOOLS_VERSION=$BUILD_TOOLS_VERSION" >> $GITHUB_ENV
        echo Last build tool version is: $BUILD_TOOLS_VERSION

    - name: Sign App
      uses: r0adkll/sign-android-release@v1
      id: sign_app
      with:
        releaseDirectory: app/build/outputs/apk/full/release
        signingKeyPath: /tmp/android-auto-key.keystore
        alias: 'key'
        keyStorePassword: "01093030445aA"
        keyPassword: "01093030445aA"

    - name: Align APK
      run: |
        $ANDROID_HOME/build-tools/$BUILD_TOOLS_VERSION/zipalign -v 4 \
          app/build/outputs/apk/full/release/app-full-release-unsigned.apk \
          app/build/outputs/apk/full/release/app-full-release-aligned.apk

    - name: Sign APK using apksigner
      run: |
        $ANDROID_HOME/build-tools/$BUILD_TOOLS_VERSION/apksigner sign --ks /tmp/android-auto-key.keystore \
          --ks-key-alias key --ks-pass pass:01093030445aA \
          --key-pass pass:01093030445aA \
          --out app/build/outputs/apk/full/release/app-full-release-signed.apk \
          app/build/outputs/apk/full/release/app-full-release-aligned.apk

    - name: Upload APK Release
      uses: actions/upload-artifact@v4
      with:
        name: APK release generated
        path: app/build/outputs/apk/full/release/app-full-release-signed.apk
ğŸ” ë³€ê²½ëœ ì 
Keystoreë¥¼ ì§ì ‘ ìƒì„± (Generate Keystore ìŠ¤í… ì¶”ê°€)

Keystoreë¥¼ /tmp/android-auto-key.keystore ê²½ë¡œì— ìƒì„±
ë¹„ë°€ë²ˆí˜¸ì™€ í‚¤ ì •ë³´ë¥¼ ì§ì ‘ í¬í•¨ (ë³´ì•ˆì´ ì¤‘ìš”í•œ ê²½ìš°, GitHub Secretsë¥¼ ì‚¬ìš©í•  ê²ƒì„ ì¶”ì²œ)
r0adkll/sign-android-releaseì—ì„œ signingKeyPathë¥¼ ì‚¬ìš©

ê¸°ì¡´ì˜ signingKeyBase64 ëŒ€ì‹ , ìš°ë¦¬ê°€ ìƒì„±í•œ /tmp/android-auto-key.keystore ê²½ë¡œë¥¼ ì‚¬ìš©
apksigner signì—ì„œë„ ë™ì¼í•œ Keystore ì‚¬ìš©

/tmp/android-auto-key.keystoreë¥¼ apksignerì—ì„œ ì§ì ‘ ì§€ì •í•˜ì—¬ ì„œëª…
ğŸ¯ ì´ì œ ì‹¤í–‰í•˜ë©´?
Keystoreê°€ ìë™ìœ¼ë¡œ ìƒì„±ë¨
APKê°€ ì •ìƒì ìœ¼ë¡œ ì„œëª…ë¨
ì¶”ê°€ì ì¸ GitHub Secrets ì—†ì´ ì‹¤í–‰ ê°€ëŠ¥!
ì´ì œ ë‹¤ì‹œ ì‹¤í–‰í•˜ë©´ ì˜¤ë¥˜ ì—†ì´ ì •ìƒì ìœ¼ë¡œ ë¹Œë“œê°€ ë  ê±°ì˜ˆìš”! ğŸš€ğŸ”¥






ë‚˜ì˜ ë§:
 Unexpected input(s) 'signingKeyPath', valid inputs are ['releaseDirectory', 'signingKeyBase64', 'alias', 'keyStorePassword', 'keyPassword']
Run r0adkll/sign-android-release@v1
  with:
    releaseDirectory: app/build/outputs/apk/full/release
    signingKeyPath: /tmp/android-auto-key.keystore
    alias: key
    keyStorePassword: 01093030445aA
    keyPassword: 01093030445aA
  env:
    JAVA_HOME: /opt/hostedtoolcache/Java_Temurin-Hotspot_jdk/21.0.6-7/x64
    JAVA_HOME_21_X64: /opt/hostedtoolcache/Java_Temurin-Hotspot_jdk/21.0.6-7/x64
    BUILD_TOOLS_VERSION: 35.0.1
Preparing to sign key @ app/build/outputs/apk/full/release with signing key
Found 1 release files.
/usr/local/lib/android/sdk/build-tools/35.0.1/zipalign -c -v 4 app/build/outputs/apk/full/release/app-full-release-unsigned.apk
Verifying alignment of app/build/outputs/apk/full/release/app-full-release-unsigned.apk (4).../usr/bin/cp app/build/outputs/apk/full/release/app-full-release-unsigned.apk app/build/outputs/apk/full/release/app-full-release-unsigned-aligned.apk 
/usr/local/lib/android/sdk/build-tools/35.0.1/apksigner sign --ks app/build/outputs/apk/full/release/signingKey.jks --ks-key-alias key --ks-pass pass:01093030445aA --out app/build/outputs/apk/full/release/app-full-release-unsigned-signed.apk --key-pass pass:01093030445aA app/build/outputs/apk/full/release/app-full-release-unsigned-aligned.apk
Failed to load signer "signer #1"
java.io.IOException: Tag number over 30 is not supported
	at java.base/sun.security.util.DerValue.<init>(DerValue.java:446)
	at java.base/sun.security.util.DerValue.<init>(DerValue.java:491)
	at java.base/sun.security.pkcs12.PKCS12KeyStore.engineLoad(PKCS12KeyStore.java:1953)
	at java.base/sun.security.util.KeyStoreDelegator.engineLoad(KeyStoreDelegator.java:228)
	at java.base/java.security.KeyStore.load(KeyStore.java:1500)
	at com.android.apksigner.SignerParams.loadKeyStoreFromFile(SignerParams.java:423)
	at com.android.apksigner.SignerParams.loadPrivateKeyAndCertsFromKeyStore(SignerParams.java:309)
	at com.android.apksigner.SignerParams.loadPrivateKeyAndCerts(SignerParams.java:237)
	at com.android.apksigner.ApkSignerTool.getSignerConfig(ApkSignerTool.java:449)
	at com.android.apksigner.ApkSignerTool.sign(ApkSignerTool.java:362)
	at com.android.apksigner.ApkSignerTool.main(ApkSignerTool.java:94)
Error: The process '/usr/local/lib/android/sdk/build-tools/35.0.1/apksigner' failed with exit code 2
ChatGPTì˜ ë§:
âš ï¸ ë¬¸ì œ ì›ì¸ ë° í•´ê²° ë°©ë²•
signingKeyPathëŠ” ìœ íš¨í•œ ì…ë ¥ê°’ì´ ì•„ë‹˜

r0adkll/sign-android-release@v1 ì•¡ì…˜ì—ì„œëŠ” signingKeyPathê°€ ì•„ë‹ˆë¼ signingKeyBase64ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
Keystore í˜•ì‹ ë¬¸ì œ (Tag number over 30 is not supported ì—ëŸ¬)

keytoolë¡œ ìƒì„±í•œ Keystoreê°€ JKS(Java KeyStore) í¬ë§·ì¸ë°, apksignerëŠ” PKCS12 í¬ë§·ì„ ê¸°ëŒ€í•  ìˆ˜ë„ ìˆìŒ.
keytoolì—ì„œ -storetype PKCS12 ì˜µì…˜ì„ ì¶”ê°€í•´ì•¼ í•¨.
âœ… ìˆ˜ì •ëœ GitHub Actions Workflow
yaml
ë³µì‚¬
í¸ì§‘
name: Android CI

on:
  push:
    branches: [ "master" ]
  pull_request:
    branches: [ "master" ]
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3

    - name: Set up JDK 21
      uses: actions/setup-java@v3
      with:
        java-version: '21'
        distribution: 'temurin'
        cache: gradle

    - name: Generate Keystore (PKCS12 Format)
      run: |
        keytool -genkeypair -v \
          -keystore android-auto-key.keystore \
          -storetype PKCS12 \  # PKCS12 í˜•ì‹ìœ¼ë¡œ ë³€ê²½
          -alias key \
          -keyalg RSA -keysize 2048 -validity 10000 \
          -dname "CN=Android, OU=Mobile, O=Company, L=City, ST=State, C=US" \
          -storepass "01093030445aA" \
          -keypass "01093030445aA"
        
        # Keystore íŒŒì¼ì„ Base64ë¡œ ë³€í™˜í•˜ì—¬ GitHub Actionì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•¨
        base64 android-auto-key.keystore > android-auto-key.keystore.b64

    - name: Build release APK
      run: ./gradlew app:assembleFullRelease

    - name: Setup build tool version variable
      shell: bash
      run: |
        BUILD_TOOLS_VERSION=$(ls /usr/local/lib/android/sdk/build-tools/ | tail -n 1)
        echo "BUILD_TOOLS_VERSION=$BUILD_TOOLS_VERSION" >> $GITHUB_ENV
        echo Last build tool version is: $BUILD_TOOLS_VERSION

    - name: Sign App
      uses: r0adkll/sign-android-release@v1
      id: sign_app
      with:
        releaseDirectory: app/build/outputs/apk/full/release
        signingKeyBase64: $(base64 android-auto-key.keystore) # Base64 ì¸ì½”ë”©ëœ Keystore ì‚¬ìš©
        alias: 'key'
        keyStorePassword: "01093030445aA"
        keyPassword: "01093030445aA"

    - name: Align APK
      run: |
        $ANDROID_HOME/build-tools/$BUILD_TOOLS_VERSION/zipalign -v 4 \
          app/build/outputs/apk/full/release/app-full-release-unsigned.apk \
          app/build/outputs/apk/full/release/app-full-release-aligned.apk

    - name: Sign APK using apksigner
      run: |
        echo "Signing with apksigner..."
        $ANDROID_HOME/build-tools/$BUILD_TOOLS_VERSION/apksigner sign --ks android-auto-key.keystore \
          --ks-key-alias key --ks-pass pass:01093030445aA \
          --key-pass pass:01093030445aA \
          --out app/build/outputs/apk/full/release/app-full-release-signed.apk \
          app/build/outputs/apk/full/release/app-full-release-aligned.apk

    - name: Upload APK Release
      uses: actions/upload-artifact@v4
      with:
        name: APK release generated
        path: app/build/outputs/apk/full/release/app-full-release-signed.apk
ğŸ” ë³€ê²½ ë° ê°œì„  ì‚¬í•­
Keystoreë¥¼ PKCS12 í˜•ì‹ìœ¼ë¡œ ìƒì„± (-storetype PKCS12 ì¶”ê°€)

ê¸°ì¡´ JKS ëŒ€ì‹  PKCS12 í˜•ì‹ìœ¼ë¡œ ìƒì„±í•˜ì—¬ apksignerì—ì„œ ì¸ì‹ ê°€ëŠ¥í•˜ë„ë¡ ë³€ê²½.
Keystoreë¥¼ Base64ë¡œ ë³€í™˜ í›„ ì‚¬ìš©

GitHub Actionsì—ì„œëŠ” signingKeyBase64ë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ë¯€ë¡œ, Keystoreë¥¼ Base64ë¡œ ë³€í™˜í•˜ì—¬ ì‚¬ìš©.
${{ secrets.SIGNING_KEY }} ëŒ€ì‹  base64 android-auto-key.keystore ê°’ì„ ì§ì ‘ ì…ë ¥.
ì •í™•í•œ apksigner ì„œëª… ê³¼ì • ì¶”ê°€

apksigner signì—ì„œ ì§ì ‘ ìƒì„±í•œ Keystore (android-auto-key.keystore)ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„œëª….
ğŸš€ ê²°ê³¼
âœ… Keystore ì§ì ‘ ìƒì„± ê°€ëŠ¥ (Secrets í•„ìš” ì—†ìŒ)
âœ… GitHub Actionsì—ì„œ ì •ìƒì ìœ¼ë¡œ APK ì„œëª…
âœ… "Tag number over 30" ì˜¤ë¥˜ í•´ê²°ë¨
ì´ì œ ì´ Workflowë¥¼ ì‹¤í–‰í•˜ë©´ ì •ìƒì ìœ¼ë¡œ ì„œëª…ëœ APKë¥¼ ìƒì„±í•  ìˆ˜ ìˆì„ ê±°ì˜ˆìš”! ğŸš€






ë‚˜ì˜ ë§:
 keytool -genkeypair -v\
    -keystore android-auto-key.keystore\
    -storetype PKCS12\ # PKCS12 í˜•ì‹ìœ¼ë¡œ ë³€ê²½
    -alias key\
    -keyalg RSA -keysize 2048 -validity 10000\
    -dname "CN=Android, OU=Mobile, O=Company, L=City, ST=State, C=US"\
    -storepass "01093030445aA"\
    -keypass "01093030445aA"
  
  # Keystore íŒŒì¼ì„ Base64ë¡œ ë³€í™˜í•˜ì—¬ GitHub Actionì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•¨
  base64 android-auto-key.keystore > android-auto-key.keystore.b64
  shell: /usr/bin/bash -e {0}
  env:
    JAVA_HOME: /opt/hostedtoolcache/Java_Temurin-Hotspot_jdk/21.0.6-7/x64
    JAVA_HOME_21_X64: /opt/hostedtoolcache/Java_Temurin-Hotspot_jdk/21.0.6-7/x64
  
Illegal option:  PKCS12
keytool -genkeypair [OPTION]...
Generates a key pair
Options:
 -alias <alias>          alias name of the entry to process
 -keyalg <alg>           key algorithm name
 -keysize <size>         key bit size
 -groupname <name>       Group name. For example, an Elliptic Curve name.
 -sigalg <alg>           signature algorithm name
 -dname <name>           distinguished name
 -startdate <date>       certificate validity start date/time
 -ext <value>            X.509 extension
 -validity <days>        validity number of days
 -keypass <arg>          key password
 -keystore <keystore>    keystore name
 -signer <alias>         signer alias
 -signerkeypass <arg>    signer key password
 -storepass <arg>        keystore password
 -storetype <type>       keystore type
 -providername <name>    provider name
 -addprovider <name>     add security provider by name (e.g. SunPKCS11)
   [-providerarg <arg>]    configure argument for -addprovider
 -providerclass <class>  add security provider by fully-qualified class name
   [-providerarg <arg>]    configure argument for -providerclass
 -providerpath <list>    provider classpath
 -v                      verbose output
 -protected              password through protected mechanism
Use "keytool -?, -h, or --help" for this help message
Error: Process completed with exit code 1. ì´ìœ ê°€ ë­˜ê¹Œ?
ChatGPTì˜ ë§:
Illegal option: PKCS12 ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ” ì´ìœ ëŠ” ì‚¬ìš© ì¤‘ì¸ keytool ë²„ì „ì—ì„œ -storetype PKCS12 ì˜µì…˜ì´ ì§€ì›ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

âœ… í•´ê²° ë°©ë²•
í˜„ì¬ ì‹¤í–‰ í™˜ê²½ì—ì„œ keytool ëª…ë ¹ì–´ì˜ -storetype PKCS12 ì˜µì…˜ì´ ì§€ì›ë˜ì§€ ì•ŠëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤.
ë”°ë¼ì„œ, JKS(Java KeyStore) í˜•ì‹ìœ¼ë¡œ ë¨¼ì € ìƒì„±í•œ í›„, PKCS12ë¡œ ë³€í™˜í•˜ëŠ” ë°©ë²•ì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

ğŸ“Œ ìˆ˜ì •ëœ ëª…ë ¹ì–´
bash
ë³µì‚¬
í¸ì§‘
# JKS(Java KeyStore) í˜•ì‹ìœ¼ë¡œ ë¨¼ì € ìƒì„±
keytool -genkeypair -v \
  -keystore android-auto-key.keystore \
  -alias key \
  -keyalg RSA -keysize 2048 -validity 10000 \
  -dname "CN=Android, OU=Mobile, O=Company, L=City, ST=State, C=US" \
  -storepass "01093030445aA" \
  -keypass "01093030445aA"

# JKS â†’ PKCS12 í˜•ì‹ìœ¼ë¡œ ë³€í™˜
keytool -importkeystore \
  -srckeystore android-auto-key.keystore \
  -destkeystore android-auto-key.p12 \
  -srcstoretype JKS \
  -deststoretype PKCS12 \
  -srcstorepass "01093030445aA" \
  -deststorepass "01093030445aA"

# Base64ë¡œ ë³€í™˜í•˜ì—¬ GitHub Actionsì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•¨
base64 android-auto-key.p12 > android-auto-key.keystore.b64
ğŸ” ì„¤ëª…
JKS í˜•ì‹ìœ¼ë¡œ ë¨¼ì € Keystore ìƒì„± (android-auto-key.keystore)
JKS â†’ PKCS12 í˜•ì‹ìœ¼ë¡œ ë³€í™˜ (android-auto-key.p12)
Base64 ì¸ì½”ë”©í•˜ì—¬ GitHub Actionsì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•˜ë„ë¡ ë³€í™˜ (android-auto-key.keystore.b64)
ì´ì œ GitHub Actionsì—ì„œ Base64ë¡œ ì¸ì½”ë”©ëœ PKCS12 Keystoreë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ğŸš€






ë‚˜ì˜ ë§:
name: Android CI

on:
  push:
    branches: [ "master" ]
  pull_request:
    branches: [ "master" ]
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3

    - name: Set up JDK 21
      uses: actions/setup-java@v3
      with:
        java-version: '21'
        distribution: 'temurin'
        cache: gradle

    - name: Generate Keystore (PKCS12 Format)
      run: |
        keytool -genkeypair -v\
          -keystore android-auto-key.keystore\
          -storetype PKCS12\ # PKCS12 í˜•ì‹ìœ¼ë¡œ ë³€ê²½
          -alias key\
          -keyalg RSA -keysize 2048 -validity 10000\
          -dname "CN=Android, OU=Mobile, O=Company, L=City, ST=State, C=US"\
          -storepass "01093030445aA"\
          -keypass "01093030445aA"
        
        # Keystore íŒŒì¼ì„ Base64ë¡œ ë³€í™˜í•˜ì—¬ GitHub Actionì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•¨
        base64 android-auto-key.keystore > android-auto-key.keystore.b64

    - name: Build release APK
      run: ./gradlew app:assembleFullRelease

    - name: Setup build tool version variable
      shell: bash
      run: |
        BUILD_TOOLS_VERSION=$(ls /usr/local/lib/android/sdk/build-tools/ | tail -n 1)
        echo "BUILD_TOOLS_VERSION=$BUILD_TOOLS_VERSION" >> $GITHUB_ENV
        echo Last build tool version is: $BUILD_TOOLS_VERSION

    - name: Sign App
      uses: r0adkll/sign-android-release@v1
      id: sign_app
      with:
        releaseDirectory: app/build/outputs/apk/full/release
        signingKeyBase64: $(base64 android-auto-key.keystore) # Base64 ì¸ì½”ë”©ëœ Keystore ì‚¬ìš©
        alias: 'key'
        keyStorePassword: "01093030445aA"
        keyPassword: "01093030445aA"

    - name: Align APK
      run: |
        $ANDROID_HOME/build-tools/$BUILD_TOOLS_VERSION/zipalign -v 4 \
          app/build/outputs/apk/full/release/app-full-release-unsigned.apk \
          app/build/outputs/apk/full/release/app-full-release-aligned.apk

    - name: Sign APK using apksigner
      run: |
        echo "Signing with apksigner..."
        $ANDROID_HOME/build-tools/$BUILD_TOOLS_VERSION/apksigner sign --ks android-auto-key.keystore \
          --ks-key-alias key --ks-pass pass:01093030445aA \
          --key-pass pass:01093030445aA \
          --out app/build/outputs/apk/full/release/app-full-release-signed.apk \
          app/build/outputs/apk/full/release/app-full-release-aligned.apk

    - name: Upload APK Release
      uses: actions/upload-artifact@v4
      with:
        name: APK release generated
        path: app/build/outputs/apk/full/release/app-full-release-signed.apk ì´ê±° ìˆ˜ì •ë²„ì „ ì ìš©í•´ì£ 
ChatGPTì˜ ë§:
ì•„ë˜ì™€ ê°™ì´ ìˆ˜ì •í•˜ë©´ ë©ë‹ˆë‹¤.

ğŸ”§ ìˆ˜ì • ì‚¬í•­
Keystore ìƒì„± ì‹œ -storetype PKCS12 ì˜¤ë¥˜ í•´ê²°
JKS í˜•ì‹ìœ¼ë¡œ ìƒì„± í›„, PKCS12ë¡œ ë³€í™˜í•˜ëŠ” ê³¼ì • ì¶”ê°€
Base64 ì¸ì½”ë”© ìˆ˜ì •
$(base64 android-auto-key.keystore) â†’ signingKeyBase64: ${{ secrets.SIGNING_KEY }}
Secrets ì‚¬ìš©ì„ ê¶Œì¥ (GitHub Actionsì—ì„œëŠ” ì§ì ‘ Base64ë¥¼ ë„£ëŠ” ê²ƒë³´ë‹¤ secretsë¥¼ í™œìš©í•˜ëŠ” ê²ƒì´ ë³´ì•ˆì— ì•ˆì „í•¨)
ApkSigner ë° ZipAlign ê²½ë¡œ ìˆ˜ì •
$ANDROID_HOME ëŒ€ì‹  $ANDROID_SDK_ROOT ì‚¬ìš©
ğŸ“Œ ìˆ˜ì •ëœ GitHub Actions íŒŒì¼
yaml
ë³µì‚¬
í¸ì§‘
name: Android CI

on:
  push:
    branches: [ "master" ]
  pull_request:
    branches: [ "master" ]
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3

    - name: Set up JDK 21
      uses: actions/setup-java@v3
      with:
        java-version: '21'
        distribution: 'temurin'
        cache: gradle

    - name: Generate Keystore (JKS â†’ PKCS12)
      run: |
        keytool -genkeypair -v \
          -keystore android-auto-key.keystore \
          -alias key \
          -keyalg RSA -keysize 2048 -validity 10000 \
          -dname "CN=Android, OU=Mobile, O=Company, L=City, ST=State, C=US" \
          -storepass "01093030445aA" \
          -keypass "01093030445aA"

        keytool -importkeystore \
          -srckeystore android-auto-key.keystore \
          -destkeystore android-auto-key.p12 \
          -srcstoretype JKS \
          -deststoretype PKCS12 \
          -srcstorepass "01093030445aA" \
          -deststorepass "01093030445aA"

        # Keystore íŒŒì¼ì„ Base64ë¡œ ë³€í™˜í•˜ì—¬ GitHub Secretsì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•¨
        base64 android-auto-key.p12 > android-auto-key.keystore.b64

    - name: Build release APK
      run: ./gradlew app:assembleFullRelease

    - name: Setup build tool version variable
      shell: bash
      run: |
        BUILD_TOOLS_VERSION=$(ls /usr/local/lib/android/sdk/build-tools/ | tail -n 1)
        echo "BUILD_TOOLS_VERSION=$BUILD_TOOLS_VERSION" >> $GITHUB_ENV
        echo "Last build tool version is: $BUILD_TOOLS_VERSION"

    - name: Sign App
      uses: r0adkll/sign-android-release@v1
      id: sign_app
      with:
        releaseDirectory: app/build/outputs/apk/full/release
        signingKeyBase64: ${{ secrets.SIGNING_KEY }} # Secretsì—ì„œ Keystore ì‚¬ìš©
        alias: 'key'
        keyStorePassword: ${{ secrets.KEYSTORE_PASSWORD }}
        keyPassword: ${{ secrets.KEY_PASSWORD }}

    - name: Align APK
      run: |
        $ANDROID_SDK_ROOT/build-tools/$BUILD_TOOLS_VERSION/zipalign -v 4 \
          app/build/outputs/apk/full/release/app-full-release-unsigned.apk \
          app/build/outputs/apk/full/release/app-full-release-aligned.apk

    - name: Sign APK using apksigner
      run: |
        echo "Signing with apksigner..."
        $ANDROID_SDK_ROOT/build-tools/$BUILD_TOOLS_VERSION/apksigner sign --ks android-auto-key.keystore \
          --ks-key-alias key --ks-pass pass:${{ secrets.KEYSTORE_PASSWORD }} \
          --key-pass pass:${{ secrets.KEY_PASSWORD }} \
          --out app/build/outputs/apk/full/release/app-full-release-signed.apk \
          app/build/outputs/apk/full/release/app-full-release-aligned.apk

    - name: Upload APK Release
      uses: actions/upload-artifact@v4
      with:
        name: APK release generated
        path: app/build/outputs/apk/full/release/app-full-release-signed.apk
ğŸ” ì£¼ìš” ë³€ê²½ì 
âœ… JKS â†’ PKCS12 ë³€í™˜ ê³¼ì • ì¶”ê°€
âœ… GitHub Secrets ì‚¬ìš© (secrets.SIGNING_KEY)
âœ… í™˜ê²½ ë³€ìˆ˜ ê°œì„  ($ANDROID_SDK_ROOT í™œìš©)
âœ… ApkSigner ë° ZipAlign ê´€ë ¨ ê²½ë¡œ ìˆ˜ì •

ì´ì œ GitHub Actionsì—ì„œ ì •ìƒì ìœ¼ë¡œ ì„œëª… ë° APK ë°°í¬ê°€ ë  ê²ë‹ˆë‹¤! ğŸš€






ë‚˜ì˜ ë§:
ì—ëŸ¬ëŠ” ë˜‘ê°™ì€ë° í•´ê²°ë°©ë²•ì´ If you're facing this issue, it seems that the names of the variables in the environment variables don't match those in GitHub secrets. This includes variables like APP_KEY_STORE, APP_ALIAS, APP_KEY_STORE_PASSWORD, and APP_KEY_PASSWORD. Ensure they are consistent. ì´ê±°ë¼ëŠ”ë° ë¬´ìŠ¨ ëœ»ì´ì•¼?
ChatGPTì˜ ë§:
ì´ ì˜¤ë¥˜ ë©”ì‹œì§€ëŠ” GitHub Secretsì— ì €ì¥ëœ í™˜ê²½ ë³€ìˆ˜ì˜ ì´ë¦„ì´ GitHub Actionsì—ì„œ ì°¸ì¡°í•˜ëŠ” í™˜ê²½ ë³€ìˆ˜ ì´ë¦„ê³¼ ì¼ì¹˜í•˜ì§€ ì•Šì•„ì„œ ë°œìƒí•˜ëŠ” ë¬¸ì œì…ë‹ˆë‹¤.

ì¦‰, secrets.KEYSTORE_PASSWORD, secrets.KEY_PASSWORD, secrets.SIGNING_KEY ë“±ìœ¼ë¡œ ì„¤ì •í•œ ê°’ì´ ì‹¤ì œë¡œ GitHub Secretsì— ì €ì¥ëœ ì´ë¦„ê³¼ ë‹¤ë¥¼ ê°€ëŠ¥ì„±ì´ ë†’ë‹¤ëŠ” ëœ»ì´ì—ìš”.

âœ… í•´ê²° ë°©ë²•
1ï¸âƒ£ GitHub Secrets í™•ì¸í•˜ê¸°
ğŸ‘‰ GitHub ë¦¬í¬ì§€í† ë¦¬ì—ì„œ Secrets ì„¤ì • í™•ì¸
GitHub ë¦¬í¬ì§€í† ë¦¬ë¡œ ì´ë™
Settings > Secrets and variables > Actions ë©”ë‰´ë¡œ ì´ë™
Secrets íƒ­ì—ì„œ ì•„ë˜ ë³€ìˆ˜ë“¤ì´ ì •í™•í•˜ê²Œ ì…ë ¥ë˜ì—ˆëŠ”ì§€ í™•ì¸:
SIGNING_KEY â†’ (Base64 ì¸ì½”ë”©ëœ Keystore)
KEYSTORE_PASSWORD â†’ (Keystore ë¹„ë°€ë²ˆí˜¸)
KEY_PASSWORD â†’ (í‚¤ ë¹„ë°€ë²ˆí˜¸)
ALIAS â†’ (í‚¤ alias)
âš ï¸ ëŒ€ì†Œë¬¸ì êµ¬ë¶„ì„ ì˜í•´ì•¼ í•©ë‹ˆë‹¤! ì˜ˆë¥¼ ë“¤ì–´ keystore_passwordê°€ ì•„ë‹ˆë¼ KEYSTORE_PASSWORDì¸ì§€ í™•ì¸í•˜ì„¸ìš”.

2ï¸âƒ£ GitHub Actions íŒŒì¼ ìˆ˜ì •í•˜ê¸°
í˜„ì¬ YAML íŒŒì¼ì—ì„œëŠ” ì•„ë˜ì²˜ëŸ¼ secrets.KEYSTORE_PASSWORD ë“±ì„ ì°¸ì¡°í•˜ê³  ìˆëŠ”ë°,
GitHub Secretsì—ì„œ ì„¤ì •í•œ ë³€ìˆ˜ëª…ì´ ë‹¤ë¥´ë©´ ê°’ì´ ë¹„ì–´ ìˆì–´ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ğŸ”¹ ë³€ìˆ˜ ì´ë¦„ì´ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸
yaml
ë³µì‚¬
í¸ì§‘
- name: Sign App
  uses: r0adkll/sign-android-release@v1
  id: sign_app
  with:
    releaseDirectory: app/build/outputs/apk/full/release
    signingKeyBase64: ${{ secrets.SIGNING_KEY }}
    alias: ${{ secrets.ALIAS }}  # ALIAS ë³€ìˆ˜ ì¶”ê°€ í™•ì¸
    keyStorePassword: ${{ secrets.KEYSTORE_PASSWORD }}
    keyPassword: ${{ secrets.KEY_PASSWORD }}
â†’ **secrets.ALIAS**ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ë‹¤ë©´ GitHub Secretsì— ì¶”ê°€í•˜ì„¸ìš”.

3ï¸âƒ£ GitHub Actionsì—ì„œ í™˜ê²½ ë³€ìˆ˜ ì¶œë ¥ í™•ì¸
GitHub Actions ì‹¤í–‰ ë¡œê·¸ì—ì„œ secrets.KEYSTORE_PASSWORD ë“±ì˜ ê°’ì´ ì •ìƒì ìœ¼ë¡œ ì„¤ì •ë˜ì—ˆëŠ”ì§€ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤.

ğŸ”¹ ë””ë²„ê¹… ì½”ë“œ ì¶”ê°€
ì•„ë˜ ì½”ë“œë¥¼ ì¶”ê°€í•˜ë©´ GitHub Actionsì—ì„œ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì¶œë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
(âš ï¸ í•˜ì§€ë§Œ ë³´ì•ˆì´ ì¤‘ìš”í•œ ê°’ì€ ì ˆëŒ€ ì¶œë ¥í•˜ë©´ ì•ˆ ë©ë‹ˆë‹¤!)

yaml
ë³µì‚¬
í¸ì§‘
- name: Debug Environment Variables
  run: |
    echo "BUILD_TOOLS_VERSION: $BUILD_TOOLS_VERSION"
    echo "ALIAS: ${{ secrets.ALIAS }}"
ğŸ’¡ KEYSTORE_PASSWORDë‚˜ KEY_PASSWORD ê°™ì€ ë¹„ë°€ë²ˆí˜¸ ê°’ì€ ì ˆëŒ€ ì¶œë ¥í•˜ì§€ ë§ˆì„¸ìš”!
ëŒ€ì‹  GitHub Secretsì—ì„œ ì§ì ‘ í™•ì¸í•˜ëŠ” ê²ƒì´ ì•ˆì „í•©ë‹ˆë‹¤.

ğŸ” ìµœì¢…ì ìœ¼ë¡œ í•´ì•¼ í•  ê²ƒ
GitHub Secretsì—ì„œ ì„¤ì •ëœ ë³€ìˆ˜ëª… í™•ì¸ (KEYSTORE_PASSWORD, KEY_PASSWORD, SIGNING_KEY, ALIAS)
GitHub Actions YAML íŒŒì¼ì—ì„œ secrets.<ë³€ìˆ˜ëª…>ê³¼ GitHub Secretsì— ì €ì¥ëœ ì´ë¦„ì´ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸
GitHub Actions ë¡œê·¸ì—ì„œ í™˜ê²½ ë³€ìˆ˜ê°€ ì •ìƒì ìœ¼ë¡œ ë¡œë“œë˜ê³  ìˆëŠ”ì§€ í™•ì¸
ì´ë ‡ê²Œ í•˜ë©´ ë¬¸ì œì—†ì´ ì •ìƒì ìœ¼ë¡œ ì„œëª…ë  ê±°ì˜ˆìš”! ğŸš€






ë‚˜ì˜ ë§:
name: Android CI

on:
  push:
    branches: [ "master" ]
  pull_request:
    branches: [ "master" ]
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3

    - name: Set up JDK 21
      uses: actions/setup-java@v3
      with:
        java-version: '21'
        distribution: 'temurin'
        cache: gradle

    - name: Generate Keystore (JKS â†’ PKCS12)
      run: |
        keytool -genkeypair -v \
          -keystore android-auto-key.keystore \
          -alias key \
          -keyalg RSA -keysize 2048 -validity 10000 \
          -dname "CN=Android, OU=Mobile, O=Company, L=City, ST=State, C=US" \
          -storepass "01093030445aA" \
          -keypass "01093030445aA"

        keytool -importkeystore \
          -srckeystore android-auto-key.keystore \
          -destkeystore android-auto-key.p12 \
          -srcstoretype JKS \
          -deststoretype PKCS12 \
          -srcstorepass "01093030445aA" \
          -deststorepass "01093030445aA"

        # Keystore íŒŒì¼ì„ Base64ë¡œ ë³€í™˜í•˜ì—¬ GitHub Secretsì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•¨
        base64 android-auto-key.p12 > android-auto-key.keystore.b64

    - name: Build release APK
      run: ./gradlew app:assembleFullRelease

    - name: Setup build tool version variable
      shell: bash
      run: |
        BUILD_TOOLS_VERSION=$(ls /usr/local/lib/android/sdk/build-tools/ | tail -n 1)
        echo "BUILD_TOOLS_VERSION=$BUILD_TOOLS_VERSION" >> $GITHUB_ENV
        echo "Last build tool version is: $BUILD_TOOLS_VERSION"

    - name: Sign App
      uses: r0adkll/sign-android-release@v1
      id: sign_app
      with:
        releaseDirectory: app/build/outputs/apk/full/release
        signingKeyBase64: ${{ secrets.SIGNING_KEY }} # Secretsì—ì„œ Keystore ì‚¬ìš©
        alias: 'key'
        keyStorePassword: ${{ secrets.KEYSTORE_PASSWORD }}
        keyPassword: ${{ secrets.KEY_PASSWORD }}

    - name: Align APK
      run: |
        $ANDROID_SDK_ROOT/build-tools/$BUILD_TOOLS_VERSION/zipalign -v 4 \
          app/build/outputs/apk/full/release/app-full-release-unsigned.apk \
          app/build/outputs/apk/full/release/app-full-release-aligned.apk

    - name: Sign APK using apksigner
      run: |
        echo "Signing with apksigner..."
        $ANDROID_SDK_ROOT/build-tools/$BUILD_TOOLS_VERSION/apksigner sign --ks android-auto-key.keystore \
          --ks-key-alias key --ks-pass pass:${{ secrets.KEYSTORE_PASSWORD }} \
          --key-pass pass:${{ secrets.KEY_PASSWORD }} \
          --out app/build/outputs/apk/full/release/app-full-release-signed.apk \
          app/build/outputs/apk/full/release/app-full-release-aligned.apk

    - name: Upload APK Release
      uses: actions/upload-artifact@v4
      with:
        name: APK release generated
        path: app/build/outputs/apk/full/release/app-full-release-signed.apk ì—¬ê¸°ì— ì € ë³€ìˆ˜ëª…ìœ¼ë¡œ í•´ì„œ ìˆ˜ì •í•´ì¤˜
ChatGPTì˜ ë§:
ì•„ë˜ëŠ” secrets.SIGNING_KEY, secrets.KEYSTORE_PASSWORD, secrets.KEY_PASSWORDë¥¼ ì‚¬ìš©í•˜ëŠ” ìˆ˜ì •ëœ GitHub Actions YAML íŒŒì¼ì…ë‹ˆë‹¤. ANDROID_SDK_ROOT ê²½ë¡œë„ ë³´ì™„í–ˆì–´ìš”.

Android Ci Workflow
ì´ì œ GitHub Secretsì— ì•„ë˜ ë³€ìˆ˜ë“¤ì„ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤:

SIGNING_KEY: Base64ë¡œ ì¸ì½”ë”©ëœ keystore íŒŒì¼ ë‚´ìš©
ALIAS: Keystoreì˜ alias ê°’ (keyë¡œ ì„¤ì •ë¨)
KEYSTORE_PASSWORD: Keystoreì˜ ë¹„ë°€ë²ˆí˜¸
KEY_PASSWORD: Keyì˜ ë¹„ë°€ë²ˆí˜¸
ì´ë ‡ê²Œ ì„¤ì •í•˜ë©´ ì •ìƒì ìœ¼ë¡œ APK ì„œëª…ì´ ë  ê±°ì˜ˆìš”! ğŸš€






ë‚˜ì˜ ë§:
        keytool -genkeypair -v \
          -keystore android-auto-key.keystore \
          -alias key \
          -keyalg RSA -keysize 2048 -validity 10000 \
          -dname "CN=Android, OU=Mobile, O=Company, L=City, ST=State, C=US" \
          -storepass "${{ secrets.KEYSTORE_PASSWORD }}" \
          -keypass "${{ secrets.KEY_PASSWORD }}" ì´ê²Œ í‚¤ë¥¼ ë§Œë“œëŠ”ê²ƒ ê°™ì€ë° ì™œ ë‚´ê°€ ì²¨ ì„¤ì •í•œ ì•”í˜¸ëŠ” ì—†ì–´ì¡Œì–´?
ChatGPTì˜ ë§:
ë„¤, ì›ë˜ ì„¤ì •í–ˆë˜ "01093030445aA"ë¼ëŠ” ì•”í˜¸ê°€ ì‚¬ë¼ì§„ ì´ìœ ëŠ”, GitHub Actionsì—ì„œ ë³´ì•ˆìƒì˜ ì´ìœ ë¡œ í•˜ë“œì½”ë”©ëœ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì œê±°í•˜ê³  ëŒ€ì‹  GitHub Secretsì„ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë°”ê¿¨ê¸° ë•Œë¬¸ì´ì—ìš”.

ì¦‰,

-storepass "${{ secrets.KEYSTORE_PASSWORD }}"
-keypass "${{ secrets.KEY_PASSWORD }}"
ì´ë ‡ê²Œ í•˜ë©´, ì‹¤ì œ ì‹¤í–‰ë  ë•Œ GitHub Secretsì— ì €ì¥ëœ ê°’ì´ ìë™ìœ¼ë¡œ ë“¤ì–´ê°€ê²Œ ë¼ìš”.
ì¦‰, ì›ë˜ ì‚¬ìš©í•˜ë˜ "01093030445aA"ë¥¼ GitHub Secretsì— ì €ì¥í•´ë‘ë©´ ê°™ì€ ê²°ê³¼ê°€ ë‚˜ì˜¤ëŠ” ê±°ì£ !

ğŸ”¹ ì¥ì 

ë³´ì•ˆ ê°•í™”: ì½”ë“œì— ë¹„ë°€ë²ˆí˜¸ê°€ ì§ì ‘ ë…¸ì¶œë˜ì§€ ì•ŠìŒ
ìœ ì§€ë³´ìˆ˜ ìš©ì´: GitHub Secretsì—ì„œ ë³€ê²½í•˜ë©´ ì½”ë“œ ìˆ˜ì • ì—†ì´ ë°”ë¡œ ì ìš©ë¨
CI/CD ìë™í™”: ë‹¤ë¥¸ íŒ€ì›ë„ ê°™ì€ GitHub Secrets ê°’ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ
ë§Œì•½ "01093030445aA"ë¥¼ ê³„ì† ì“°ê³  ì‹¶ë‹¤ë©´,
GitHubì˜ Repository Settings â†’ Secrets and variables â†’ Actions â†’ New repository secretì—ì„œ

KEYSTORE_PASSWORD ê°’: "01093030445aA"
KEY_PASSWORD ê°’: "01093030445aA"
ì´ë ‡ê²Œ ì €ì¥í•´ì£¼ë©´ ë¼ìš”. ğŸ˜Š






ë‚˜ì˜ ë§:
alias ê°’ì€ ì €ì¥ ì•ˆí•´ë„ ë˜?
ChatGPTì˜ ë§:
ë„¤, alias ê°’(ì—¬ê¸°ì„œëŠ” "key")ì€ GitHub Secretsì— ì €ì¥í•  í•„ìš”ê°€ ì—†ì–´ìš”.

ğŸ”¹ ì´ìœ 
aliasëŠ” í‚¤ìŠ¤í† ì–´ ë‚´ë¶€ì—ì„œ íŠ¹ì • í‚¤ë¥¼ ì‹ë³„í•˜ëŠ” ì´ë¦„ì¼ ë¿ì´ê³ , ë³´ì•ˆì ìœ¼ë¡œ ì¤‘ìš”í•œ ë¹„ë°€ë²ˆí˜¸ë‚˜ í‚¤ ìì²´ëŠ” ì•„ë‹ˆê¸° ë•Œë¬¸ì´ì—ìš”.
ì½”ë“œì—ì„œ ì´ë¯¸ -alias keyë¡œ ì„¤ì •ë˜ì–´ ìˆìœ¼ë¯€ë¡œ, ë”°ë¡œ GitHub Secretsì— ì €ì¥í•  í•„ìš”ê°€ ì—†ì–´ìš”.
âœ… ì •ë¦¬
ë³€ìˆ˜	GitHub Secrets ì €ì¥ í•„ìš” ì—¬ë¶€	ì´ìœ 
KEYSTORE_PASSWORD	âœ… í•„ìš”	í‚¤ìŠ¤í† ì–´ íŒŒì¼ ì•”í˜¸ì´ë¯€ë¡œ ë³´ì•ˆ ì¤‘ìš”
KEY_PASSWORD	âœ… í•„ìš”	í‚¤ë¥¼ ì‚¬ìš©í•  ë•Œ í•„ìš”í•œ ì•”í˜¸ì´ë¯€ë¡œ ë³´ì•ˆ ì¤‘ìš”
alias (ì˜ˆ: key)	âŒ ë¶ˆí•„ìš”	í‚¤ìŠ¤í† ì–´ ë‚´ë¶€ í‚¤ ì‹ë³„ìš© ì´ë¦„ì´ë¯€ë¡œ ë³´ì•ˆ ì¤‘ìš” X
ğŸ“Œ ê²°ë¡ 
GitHub Secretsì— ì €ì¥í•´ì•¼ í•  ê°’ì€ KEYSTORE_PASSWORDì™€ KEY_PASSWORDë§Œ!
alias ê°’("key")ì€ ì½”ë“œì—ì„œ ì§ì ‘ ì‚¬ìš©í•˜ë©´ ë¼ìš”. ğŸ˜Š






ë‚˜ì˜ ë§:
Run r0adkll/sign-android-release@v1
  with:
    releaseDirectory: app/build/outputs/apk/full/release
    keyStorePassword: ***
    keyPassword: ***
  env:
    JAVA_HOME: /opt/hostedtoolcache/Java_Temurin-Hotspot_jdk/21.0.6-7/x64
    JAVA_HOME_21_X64: /opt/hostedtoolcache/Java_Temurin-Hotspot_jdk/21.0.6-7/x64
    BUILD_TOOLS_VERSION: 35.0.1
Preparing to sign key @ app/build/outputs/apk/full/release with signing key
Found 1 release files.
/usr/local/lib/android/sdk/build-tools/35.0.1/zipalign -c -v 4 app/build/outputs/apk/full/release/app-full-release-unsigned.apk
Verifying alignment of app/build/outputs/apk/full/release/app-full-release-unsigned.apk (4)...    ì´ ëª…ë ¹ì–´ ë’¤ë¡œ  54347573 res/Sc.xml (OK - compressed)
54347998 res/Se (OK - compressed)
54348259 res/Se.xml (OK - compressed)
54348961 res/Sm.xml (OK - compressed)
54350097 res/Sp (OK - compressed)
54350176 res/Sq.png (OK)
54350781 res/Sr.xml (OK - compressed)
54351253 res/Sr1.xml (OK - compressed)
54351708 res/Su.9.png (OK)
54351926 res/Sz.xml (OK - compressed)
54352448 res/T4.xml (OK - compressed)
54353000 res/T5.xml (OK - compressed)
54353479 res/T7.xml (OK - compressed)
54355342 res/TA.xml (OK - compressed)
54356991 res/TB.xml (OK - compressed)
54357245 res/TH.xml (OK - compressed)
54357544 res/TJ (OK - compressed) ì´ëŸ° ê²ƒë“¤ì´ ì­‰ ë‚˜ì˜¤ë‹¤ê°€ ê·¸ëƒ¥ ì•„ë¬´ ë©”ì‹œì§€ ì—†ì´ ì•ˆë˜ë„¤ ? 
ChatGPTì˜ ë§:
GitHub Actions ì‹¤í–‰ ì¤‘ì— ì•„ë¬´ ë©”ì‹œì§€ ì—†ì´ ë©ˆì¶”ëŠ” ë¬¸ì œëŠ” ë³´í†µ ë‹¤ìŒ ì¤‘ í•˜ë‚˜ê°€ ì›ì¸ì¼ ê°€ëŠ¥ì„±ì´ ë†’ì•„ìš”.

ğŸ” 1. ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆì§€ë§Œ ë¡œê·¸ê°€ í‘œì‹œë˜ì§€ ì•ŠìŒ
ğŸ”¹ í•´ê²° ë°©ë²•
ì•„ë˜ ëª…ë ¹ì–´ë¥¼ Sign APK using apksigner ì „ì— ì‹¤í–‰í•´ì„œ, ë¡œê·¸ë¥¼ ê°•ì œë¡œ í‘œì‹œí•´ë³´ì„¸ìš”.

yaml
ë³µì‚¬
í¸ì§‘
    - name: Debug Signing Process
      run: |
        set -x  # ì‹¤í–‰ë˜ëŠ” ëª…ë ¹ì–´ ì¶œë ¥
        ls -l app/build/outputs/apk/full/release
        echo "Checking if APK exists..."
        if [ -f "app/build/outputs/apk/full/release/app-full-release-unsigned.apk" ]; then
          echo "Unsigned APK found."
        else
          echo "Unsigned APK NOT found."
          exit 1
        fi
âœ… ì´ ì½”ë“œê°€ í•˜ëŠ” ì¼

set -x â†’ ì‹¤í–‰ ì¤‘ì¸ ëª…ë ¹ì–´ë¥¼ í„°ë¯¸ë„ì— ì¶œë ¥
ls -l â†’ APK íŒŒì¼ë“¤ì´ ì‹¤ì œë¡œ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸
if [ -f ...] â†’ APKê°€ ì—†ìœ¼ë©´ exit 1ë¡œ ì‹¤íŒ¨ ì²˜ë¦¬
ğŸ” 2. zipalignì´ ë¹„ì •ìƒ ì¢…ë£Œë¨
í˜„ì¬ ë¡œê·¸ì—ì„œ zipalignì€ ì‹¤í–‰ëì§€ë§Œ, ê·¸ ì´í›„ë¡œ ë©ˆì¶˜ ê²ƒ ê°™ì•„ìš”.

ğŸ”¹ í•´ê²° ë°©ë²•
zipalignì´ ì‹¤í–‰ëœ í›„ ì •ìƒì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.

yaml
ë³µì‚¬
í¸ì§‘
    - name: Align APK
      run: |
        echo "Running zipalign..."
        $ANDROID_SDK_ROOT/build-tools/$BUILD_TOOLS_VERSION/zipalign -v 4 \
          app/build/outputs/apk/full/release/app-full-release-unsigned.apk \
          app/build/outputs/apk/full/release/app-full-release-aligned.apk \
        && echo "zipalign completed successfully."
ğŸ“Œ ë§Œì•½ zipalignì—ì„œ ë©ˆì¶”ë©´?

ë¹Œë“œëœ APKê°€ ì†ìƒëì„ ê°€ëŠ¥ì„±ì´ ìˆìŒ
Gradle ë¹Œë“œë¥¼ ë‹¤ì‹œ í™•ì¸í•´ì•¼ í•¨ (ì˜ˆ: ./gradlew clean ì¶”ê°€)
ğŸ” 3. APK íŒŒì¼ì´ ì†ìƒë˜ì—ˆê±°ë‚˜ ìƒì„±ë˜ì§€ ì•ŠìŒ
ë¡œê·¸ì—ì„œ app-full-release-unsigned.apk íŒŒì¼ì´ í™•ì¸ë˜ì—ˆëŠ”ì§€ ì²´í¬í•´ ë³´ì„¸ìš”.

ğŸ”¹ í•´ê²° ë°©ë²•
ì•„ë˜ ì½”ë“œ ì¶”ê°€í•´ì„œ APK íŒŒì¼ í¬ê¸° í™•ì¸í•˜ì„¸ìš”.

yaml
ë³µì‚¬
í¸ì§‘
    - name: Check APK File
      run: |
        echo "Checking APK size..."
        ls -lh app/build/outputs/apk/full/release/
âœ… ì •ìƒì ì¸ APKë¼ë©´?
ì¶œë ¥ ê²°ê³¼ì—ì„œ .apk íŒŒì¼ í¬ê¸°ê°€ 10MB ì´ìƒì´ì–´ì•¼ í•´ìš”.

âŒ ë§Œì•½ 0KBë¼ë©´?

Gradle ë¹Œë“œ ë¬¸ì œ ê°€ëŠ¥ì„± (./gradlew assembleFullReleaseê°€ ì‹¤íŒ¨í–ˆì„ ìˆ˜ë„ ìˆìŒ)
Keystore ë¬¸ì œ ê°€ëŠ¥ì„± (ì˜ëª»ëœ ì„œëª…)
ğŸ” 4. apksigner ì‹¤í–‰ì´ ë¹„ì •ìƒ ì¢…ë£Œë¨
apksignerì—ì„œ ë¡œê·¸ê°€ ì—†ì´ ë©ˆì·„ë‹¤ë©´, Keystore ê´€ë ¨ ë¬¸ì œì¼ ê°€ëŠ¥ì„±ì´ ë†’ì•„ìš”.

ğŸ”¹ í•´ê²° ë°©ë²•
ì•„ë˜ ì½”ë“œ ì¶”ê°€í•´ì„œ Keystore íŒŒì¼ì´ ì˜¬ë°”ë¥´ê²Œ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.

yaml
ë³µì‚¬
í¸ì§‘
    - name: Debug Keystore
      run: |
        ls -lh android-auto-key.keystore
        keytool -list -keystore android-auto-key.keystore -storepass "${{ secrets.KEYSTORE_PASSWORD }}"
âœ… ì •ìƒì ì¸ ê²½ìš°

android-auto-key.keystoreê°€ ì¡´ì¬í•˜ê³ , í¬ê¸°ê°€ ëª‡ KB ì´ìƒì´ì–´ì•¼ í•¨
keytool -list ëª…ë ¹ì–´ê°€ ì‹¤í–‰ë˜ë©´ ì •ìƒì ì¸ Keystoreì„
âŒ ì—ëŸ¬ê°€ ëœ¬ë‹¤ë©´?

Keystore íŒŒì¼ì´ ì†ìƒë¨ â†’ ë‹¤ì‹œ ìƒì„±í•´ì•¼ í•¨
secrets.KEYSTORE_PASSWORD ê°’ì´ ì˜¬ë°”ë¥¸ì§€ í™•ì¸
âœ… ì •ë¦¬ (ë¬´ì—‡ì„ ì²´í¬í•´ì•¼ í•˜ëŠ”ê°€?)
ì²´í¬ í•­ëª©	í•´ê²° ë°©ë²•
APK íŒŒì¼ì´ ì¡´ì¬í•˜ëŠ”ê°€?	ls -lh app/build/outputs/apk/full/release/ ì‹¤í–‰
zipalignì´ ì •ìƒ ì¢…ë£Œë˜ì—ˆëŠ”ê°€?	echo "zipalign completed successfully." ì¶”ê°€
Keystore íŒŒì¼ì´ ì •ìƒì ì¸ê°€?	keytool -list -keystore android-auto-key.keystore ì‹¤í–‰
Gradle ë¹Œë“œê°€ ì •ìƒ ì™„ë£Œë˜ì—ˆëŠ”ê°€?	./gradlew assembleFullRelease ì„±ê³µ ì—¬ë¶€ í™•ì¸
ìœ„ ì²´í¬ë¥¼ í•œ ë²ˆì”© ì‹œë„í•´ ë³´ê³ , ì–´ë””ì—ì„œ ë©ˆì¶”ëŠ”ì§€ í™•ì¸ í›„ ë‹¤ì‹œ ê³µìœ í•´ ì£¼ì„¸ìš”! ğŸš€






ë‚˜ì˜ ë§:
name: Android CI

on:
  push:
    branches: ["master"]
  pull_request:
    branches: ["master"]
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3

    - name: Set up JDK 21
      uses: actions/setup-java@v3
      with:
        java-version: '21'
        distribution: 'temurin'
        cache: gradle

    - name: Generate Keystore (JKS â†’ PKCS12)
      run: |
        keytool -genkeypair -v \
          -keystore android-auto-key.keystore \
          -alias key \
          -keyalg RSA -keysize 2048 -validity 10000 \
          -dname "CN=Android, OU=Mobile, O=Company, L=City, ST=State, C=US" \
          -storepass "${{ secrets.KEYSTORE_PASSWORD }}" \
          -keypass "${{ secrets.KEY_PASSWORD }}"

        keytool -importkeystore \
          -srckeystore android-auto-key.keystore \
          -destkeystore android-auto-key.p12 \
          -srcstoretype JKS \
          -deststoretype PKCS12 \
          -srcstorepass "${{ secrets.KEYSTORE_PASSWORD }}" \
          -deststorepass "${{ secrets.KEYSTORE_PASSWORD }}"

        # Keystore íŒŒì¼ì„ Base64ë¡œ ë³€í™˜í•˜ì—¬ GitHub Secretsì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•¨
        base64 android-auto-key.p12 > android-auto-key.keystore.b64

    - name: Build release APK
      run: ./gradlew app:assembleFullRelease

    - name: Setup build tool version variable
      shell: bash
      run: |
        BUILD_TOOLS_VERSION=$(ls /usr/local/lib/android/sdk/build-tools/ | tail -n 1)
        echo "BUILD_TOOLS_VERSION=$BUILD_TOOLS_VERSION" >> $GITHUB_ENV
        echo "Last build tool version is: $BUILD_TOOLS_VERSION"

    - name: Sign App
      uses: r0adkll/sign-android-release@v1
      id: sign_app
      with:
        releaseDirectory: app/build/outputs/apk/full/release
        signingKeyBase64: ${{ secrets.SIGNING_KEY }}
        alias: ${{ secrets.ALIAS }}
        keyStorePassword: ${{ secrets.KEYSTORE_PASSWORD }}
        keyPassword: ${{ secrets.KEY_PASSWORD }}

    - name: Align APK
      run: |
        $ANDROID_HOME/build-tools/$BUILD_TOOLS_VERSION/zipalign -v 4 \
          app/build/outputs/apk/full/release/app-full-release-unsigned.apk \
          app/build/outputs/apk/full/release/app-full-release-aligned.apk

    - name: Sign APK using apksigner
      run: |
        echo "Signing with apksigner..."
        $ANDROID_HOME/build-tools/$BUILD_TOOLS_VERSION/apksigner sign --ks android-auto-key.keystore \
          --ks-key-alias ${{ secrets.ALIAS }} \
          --ks-pass pass:${{ secrets.KEYSTORE_PASSWORD }} \
          --key-pass pass:${{ secrets.KEY_PASSWORD }} \
          --out app/build/outputs/apk/full/release/app-full-release-signed.apk \
          app/build/outputs/apk/full/release/app-full-release-aligned.apk

    - name: Upload APK Release
      uses: actions/upload-artifact@v4
      with:
        name: APK release generated
        path: app/build/outputs/apk/full/release/app-full-release-signed.apk   ì—¬ê¸°ì— apk íŒŒì¼ì´ ì¡´ì¬í•˜ëŠ”ì§€ì™€ zipalignì´ ì •ìƒ ì¢…ë£Œë˜ì—ˆëŠ”ì§€ê¹Œì§€ í™•ì¸í•˜ëŠ”ê±° ë„£ì–´ì¤˜
ChatGPTì˜ ë§:
ì•„ë˜ ìˆ˜ì •ëœ Android CI ì›Œí¬í”Œë¡œìš°ì—ì„œëŠ”

APK íŒŒì¼ ì¡´ì¬ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ëŠ” ë””ë²„ê¹… ìŠ¤í… ì¶”ê°€
zipalign ì •ìƒ ì¢…ë£Œ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ëŠ” ë¡œê·¸ ì¶”ê°€
Keystore íŒŒì¼ì´ ì •ìƒ ìƒì„±ë˜ì—ˆëŠ”ì§€ë„ í™•ì¸
âœ… ë³€ê²½ ì‚¬í•­ ìš”ì•½
Keystore ë””ë²„ê¹… ì¶”ê°€ (ls -lh android-auto-key.keystore)
APK ì¡´ì¬ ì—¬ë¶€ í™•ì¸ ì¶”ê°€ (ls -lh app/build/outputs/apk/full/release/)
zipalign ì‹¤í–‰ í›„ ì™„ë£Œ ë¡œê·¸ ì¶”ê°€ (echo "zipalign completed successfully.")
apksigner ì‹¤í–‰ í›„ ì™„ë£Œ ë¡œê·¸ ì¶”ê°€ (echo "APK signing completed successfully.")
ğŸ›  ìˆ˜ì •ëœ GitHub Actions ì›Œí¬í”Œë¡œìš°
yaml
ë³µì‚¬
í¸ì§‘
name: Android CI

on:
  push:
    branches: ["master"]
  pull_request:
    branches: ["master"]
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3

    - name: Set up JDK 21
      uses: actions/setup-java@v3
      with:
        java-version: '21'
        distribution: 'temurin'
        cache: gradle

    - name: Generate Keystore (JKS â†’ PKCS12)
      run: |
        keytool -genkeypair -v \
          -keystore android-auto-key.keystore \
          -alias key \
          -keyalg RSA -keysize 2048 -validity 10000 \
          -dname "CN=Android, OU=Mobile, O=Company, L=City, ST=State, C=US" \
          -storepass "${{ secrets.KEYSTORE_PASSWORD }}" \
          -keypass "${{ secrets.KEY_PASSWORD }}"

        keytool -importkeystore \
          -srckeystore android-auto-key.keystore \
          -destkeystore android-auto-key.p12 \
          -srcstoretype JKS \
          -deststoretype PKCS12 \
          -srcstorepass "${{ secrets.KEYSTORE_PASSWORD }}" \
          -deststorepass "${{ secrets.KEYSTORE_PASSWORD }}"

        # Keystore íŒŒì¼ì„ Base64ë¡œ ë³€í™˜í•˜ì—¬ GitHub Secretsì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•¨
        base64 android-auto-key.p12 > android-auto-key.keystore.b64

    - name: Debug Keystore
      run: |
        echo "Checking Keystore file..."
        ls -lh android-auto-key.keystore

    - name: Build release APK
      run: ./gradlew app:assembleFullRelease

    - name: Setup build tool version variable
      shell: bash
      run: |
        BUILD_TOOLS_VERSION=$(ls /usr/local/lib/android/sdk/build-tools/ | tail -n 1)
        echo "BUILD_TOOLS_VERSION=$BUILD_TOOLS_VERSION" >> $GITHUB_ENV
        echo "Last build tool version is: $BUILD_TOOLS_VERSION"

    - name: Debug APK before signing
      run: |
        echo "Checking APK files before signing..."
        ls -lh app/build/outputs/apk/full/release/

    - name: Sign App
      uses: r0adkll/sign-android-release@v1
      id: sign_app
      with:
        releaseDirectory: app/build/outputs/apk/full/release
        signingKeyBase64: ${{ secrets.SIGNING_KEY }}
        alias: ${{ secrets.ALIAS }}
        keyStorePassword: ${{ secrets.KEYSTORE_PASSWORD }}
        keyPassword: ${{ secrets.KEY_PASSWORD }}

    - name: Align APK
      run: |
        echo "Running zipalign..."
        $ANDROID_HOME/build-tools/$BUILD_TOOLS_VERSION/zipalign -v 4 \
          app/build/outputs/apk/full/release/app-full-release-unsigned.apk \
          app/build/outputs/apk/full/release/app-full-release-aligned.apk \
        && echo "zipalign completed successfully."

    - name: Debug APK after zipalign
      run: |
        echo "Checking APK files after zipalign..."
        ls -lh app/build/outputs/apk/full/release/

    - name: Sign APK using apksigner
      run: |
        echo "Signing with apksigner..."
        $ANDROID_HOME/build-tools/$BUILD_TOOLS_VERSION/apksigner sign --ks android-auto-key.keystore \
          --ks-key-alias ${{ secrets.ALIAS }} \
          --ks-pass pass:${{ secrets.KEYSTORE_PASSWORD }} \
          --key-pass pass:${{ secrets.KEY_PASSWORD }} \
          --out app/build/outputs/apk/full/release/app-full-release-signed.apk \
          app/build/outputs/apk/full/release/app-full-release-aligned.apk \
        && echo "APK signing completed successfully."

    - name: Debug APK after signing
      run: |
        echo "Checking APK files after signing..."
        ls -lh app/build/outputs/apk/full/release/

    - name: Upload APK Release
      uses: actions/upload-artifact@v4
      with:
        name: APK release generated
        path: app/build/outputs/apk/full/release/app-full-release-signed.apk
ğŸš€ ì¶”ê°€ëœ ë””ë²„ê¹… ìŠ¤í… ì„¤ëª…
ë””ë²„ê¹… ìŠ¤í…	ì„¤ëª…
Keystore íŒŒì¼ í™•ì¸	ls -lh android-auto-key.keystore
APK ìƒì„± ì—¬ë¶€ í™•ì¸	ls -lh app/build/outputs/apk/full/release/
zipalign ì •ìƒ ì™„ë£Œ ë¡œê·¸ ì¶”ê°€	"zipalign completed successfully."
apksigner ì •ìƒ ì™„ë£Œ ë¡œê·¸ ì¶”ê°€	"APK signing completed successfully."
ğŸ“Œ ì´ì œ ì‹¤í–‰í•˜ë©´ ê¸°ëŒ€í•  ìˆ˜ ìˆëŠ” ê²°ê³¼
Keystore íŒŒì¼ì´ ì •ìƒ ìƒì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸ ê°€ëŠ¥
APKê°€ ì •ìƒì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸ ê°€ëŠ¥
zipalignì´ ì •ìƒ ì™„ë£Œë˜ì—ˆëŠ”ì§€ ë¡œê·¸ í™•ì¸ ê°€ëŠ¥
APK ì„œëª…ì´ ì •ìƒì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆëŠ”ì§€ ë¡œê·¸ í™•ì¸ ê°€ëŠ¥
ì´ì œ ì‹¤í–‰í•´ ë³´ê³  ì–´ë””ì„œ ë©ˆì¶”ëŠ”ì§€ í™•ì¸í•œ í›„ ê³µìœ í•´ ì£¼ì„¸ìš”! ğŸš€






ë‚˜ì˜ ë§:
Run echo "Checking Keystore file..."
  echo "Checking Keystore file..."
  ls -lh android-auto-key.keystore
  shell: /usr/bin/bash -e {0}
  env:
    JAVA_HOME: /opt/hostedtoolcache/Java_Temurin-Hotspot_jdk/21.0.6-7/x64
    JAVA_HOME_21_X64: /opt/hostedtoolcache/Java_Temurin-Hotspot_jdk/21.0.6-7/x64
Checking Keystore file...
-rw-r--r-- 1 runner docker 2.7K Feb 21 04:10 android-auto-key.keystore   ì´ê±´ ì˜ ëœê±°ì§€?
ChatGPTì˜ ë§:
ë„¤, ì˜ ëœ ê±°ì˜ˆìš”! ğŸ‰

ì¶œë ¥ëœ ë‚´ìš©:

vbnet
ë³µì‚¬
í¸ì§‘
-rw-r--r-- 1 runner docker 2.7K Feb 21 04:10 android-auto-key.keystore
íŒŒì¼ì´ ì •ìƒì ìœ¼ë¡œ ì¡´ì¬í•¨ (android-auto-key.keystore)
íŒŒì¼ í¬ê¸°ê°€ 2.7Kë¡œ, ì‹¤ì œë¡œ ìƒì„±ë¨
ìƒì„± ì‹œê°„ì´ Feb 21 04:10, ì¦‰ ìµœì‹  ì‹¤í–‰ëœ ì‹œê°„ê³¼ ì¼ì¹˜
ì´ì œ ë‹¤ìŒ ë‹¨ê³„(zipalignê³¼ apksigner)ë¡œ ê°€ì„œ ì–´ë–¤ ë¬¸ì œê°€ ìˆëŠ”ì§€ í™•ì¸í•˜ë©´ ë©ë‹ˆë‹¤! ğŸš€
í˜¹ì‹œ ì–´ë””ì„œ ë©ˆì¶”ëŠ”ì§€ ë¡œê·¸ë¥¼ ë³´ì—¬ì£¼ë©´ ì›ì¸ì„ ë” ì •í™•í•˜ê²Œ ë¶„ì„í•  ìˆ˜ ìˆì–´ìš”.






ë‚˜ì˜ ë§:
Run echo "Checking APK files before signing..."
  echo "Checking APK files before signing..."
  ls -lh app/build/outputs/apk/full/release/
  shell: /usr/bin/bash -e {0}
  env:
    JAVA_HOME: /opt/hostedtoolcache/Java_Temurin-Hotspot_jdk/21.0.6-7/x64
    JAVA_HOME_21_X64: /opt/hostedtoolcache/Java_Temurin-Hotspot_jdk/21.0.6-7/x64
    BUILD_TOOLS_VERSION: 35.0.1
Checking APK files before signing...
total 65M
-rw-r--r-- 1 runner docker  65M Feb 21 04:19 app-full-release-unsigned.apk
drwxr-xr-x 4 runner docker 4.0K Feb 21 04:19 baselineProfiles
-rw-r--r-- 1 runner docker  767 Feb 21 04:19 output-metadata.json íŒŒì¼ë„ ì˜ ë§Œë“¤ì–´ì§„ê±° ê°™ê³  
ChatGPTì˜ ë§:
ë„¤, APK íŒŒì¼ë„ ì •ìƒì ìœ¼ë¡œ ìƒì„±ëœ ê²ƒ ê°™ì•„ìš”! ğŸ‰

ì¶œë ¥ëœ ë‚´ìš©:

arduino
ë³µì‚¬
í¸ì§‘
total 65M
-rw-r--r-- 1 runner docker  65M Feb 21 04:19 app-full-release-unsigned.apk
drwxr-xr-x 4 runner docker 4.0K Feb 21 04:19 baselineProfiles
-rw-r--r-- 1 runner docker  767 Feb 21 04:19 output-metadata.json
app-full-release-unsigned.apk (65MB) â†’ APKê°€ ì •ìƒì ìœ¼ë¡œ ë¹Œë“œë¨
output-metadata.json â†’ ë©”íƒ€ë°ì´í„° íŒŒì¼ë„ ì •ìƒì ìœ¼ë¡œ ìƒì„±ë¨
ì´ì œ ë‹¤ìŒ ë‹¨ê³„ì¸ zipalignê³¼ apksignerê°€ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•˜ë©´ ë©ë‹ˆë‹¤!
í˜¹ì‹œ ê·¸ ê³¼ì •ì—ì„œ ì—ëŸ¬ê°€ ë°œìƒí•˜ë©´ ë¡œê·¸ë¥¼ ë³´ì—¬ì£¼ë©´ ë” ë¶„ì„í•´ë³¼ê²Œìš”. ğŸš€






ë‚˜ì˜ ë§:
name: Android CI

on:
  push:
    branches: ["master"]
  pull_request:
    branches: ["master"]
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3

    - name: Set up JDK 21
      uses: actions/setup-java@v3
      with:
        java-version: '21'
        distribution: 'temurin'
        cache: gradle

    - name: Generate Keystore (JKS â†’ PKCS12)
      run: |
        keytool -genkeypair -v \
          -keystore android-auto-key.keystore \
          -alias key \
          -keyalg RSA -keysize 2048 -validity 10000 \
          -dname "CN=Android, OU=Mobile, O=Company, L=City, ST=State, C=US" \
          -storepass "${{ secrets.KEYSTORE_PASSWORD }}" \
          -keypass "${{ secrets.KEY_PASSWORD }}"

        keytool -importkeystore \
          -srckeystore android-auto-key.keystore \
          -destkeystore android-auto-key.p12 \
          -srcstoretype JKS \
          -deststoretype PKCS12 \
          -srcstorepass "${{ secrets.KEYSTORE_PASSWORD }}" \
          -deststorepass "${{ secrets.KEYSTORE_PASSWORD }}"

        # Keystore íŒŒì¼ì„ Base64ë¡œ ë³€í™˜í•˜ì—¬ GitHub Secretsì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•¨
        base64 android-auto-key.p12 > android-auto-key.keystore.b64

    - name: Debug Keystore
      run: |
        echo "Checking Keystore file..."
        ls -lh android-auto-key.keystore

    - name: Build release APK
      run: ./gradlew app:assembleFullRelease

    - name: Setup build tool version variable
      shell: bash
      run: |
        BUILD_TOOLS_VERSION=$(ls /usr/local/lib/android/sdk/build-tools/ | tail -n 1)
        echo "BUILD_TOOLS_VERSION=$BUILD_TOOLS_VERSION" >> $GITHUB_ENV
        echo "Last build tool version is: $BUILD_TOOLS_VERSION"

    - name: Debug APK before signing
      run: |
        echo "Checking APK files before signing..."
        ls -lh app/build/outputs/apk/full/release/

    - name: Sign App
      uses: r0adkll/sign-android-release@v1
      id: sign_app
      with:
        releaseDirectory: app/build/outputs/apk/full/release
        signingKeyBase64: ${{ secrets.SIGNING_KEY }}
        alias: ${{ secrets.ALIAS }}
        keyStorePassword: ${{ secrets.KEYSTORE_PASSWORD }}
        keyPassword: ${{ secrets.KEY_PASSWORD }}

    - name: Align APK
      run: |
        echo "Running zipalign..."
        $ANDROID_HOME/build-tools/$BUILD_TOOLS_VERSION/zipalign -v 4 \
          app/build/outputs/apk/full/release/app-full-release-unsigned.apk \
          app/build/outputs/apk/full/release/app-full-release-aligned.apk \
        && echo "zipalign completed successfully."

    - name: Debug APK after zipalign
      run: |
        echo "Checking APK files after zipalign..."
        ls -lh app/build/outputs/apk/full/release/

    - name: Sign APK using apksigner
      run: |
        echo "Signing with apksigner..."
        $ANDROID_HOME/build-tools/$BUILD_TOOLS_VERSION/apksigner sign --ks android-auto-key.keystore \
          --ks-key-alias ${{ secrets.ALIAS }} \
          --ks-pass pass:${{ secrets.KEYSTORE_PASSWORD }} \
          --key-pass pass:${{ secrets.KEY_PASSWORD }} \
          --out app/build/outputs/apk/full/release/app-full-release-signed.apk \
          app/build/outputs/apk/full/release/app-full-release-aligned.apk \
        && echo "APK signing completed successfully."

    - name: Debug APK after signing
      run: |
        echo "Checking APK files after signing..."
        ls -lh app/build/outputs/apk/full/release/

    - name: Upload APK Release
      uses: actions/upload-artifact@v4
      with:
        name: APK release generated
        path: app/build/outputs/apk/full/release/app-full-release-signed.apk  ê·¸ëŸ¼ ì—¬ê¸°ì— zipalign ì •ìƒ ì™„ë£Œ ë¡œê·¸ ì¶”ê°€í•˜ëŠ”ê±°ë‘ apksigner ì •ìƒ ì™„ë£Œ ë¡œê·¸ ì¶”ê°€í•œ ë²„ì „ ë§Œë“¤ì–´ì¤˜
ChatGPTì˜ ë§:
ì—…ë°ì´íŠ¸ëœ GitHub Actions ì›Œí¬í”Œë¡œìš°ì—ì„œ zipalignê³¼ apksignerê°€ ì •ìƒì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆëŠ”ì§€ ë¡œê·¸ë¥¼ ì¶”ê°€í•œ ë²„ì „ì„ ì œê³µí• ê²Œìš”.

Android Ci Workflow
ì—…ë°ì´íŠ¸ëœ ë²„ì „ì—ì„œëŠ” zipalignê³¼ apksigner ì‹¤í–‰ í›„ ì •ìƒ ì™„ë£Œ ì—¬ë¶€ë¥¼ ë¡œê·¸ë¡œ ì¶œë ¥í•˜ë„ë¡ í–ˆì–´. ì´ì œ ë¹Œë“œ ê³¼ì •ì—ì„œ ë¬¸ì œê°€ ìƒê¸°ë©´ ë¡œê·¸ë¥¼ í†µí•´ ì›ì¸ì„ ë” ì‰½ê²Œ íŒŒì•…í•  ìˆ˜ ìˆì„ ê±°ì•¼. í•„ìš”í•œ ì¶”ê°€ ìˆ˜ì •ì´ ìˆìœ¼ë©´ ì•Œë ¤ì¤˜! ğŸš€






ë‚˜ì˜ ë§:
Run echo "Signing with apksigner..."
  echo "Signing with apksigner..."
  $ANDROID_HOME/build-tools/$BUILD_TOOLS_VERSION/apksigner sign --ks android-auto-key.keystore \
    --ks-key-alias  \
    --ks-pass pass:*** \
    --key-pass pass:*** \
    --out app/build/outputs/apk/full/release/app-full-release-signed.apk \
    app/build/outputs/apk/full/release/app-full-release-aligned.apk \
  && echo "APK signing completed successfully."
  shell: /usr/bin/bash -e {0}
  env:
    JAVA_HOME: /opt/hostedtoolcache/Java_Temurin-Hotspot_jdk/21.0.6-7/x64
    JAVA_HOME_21_X64: /opt/hostedtoolcache/Java_Temurin-Hotspot_jdk/21.0.6-7/x64
    BUILD_TOOLS_VERSION: 35.0.1
Signing with apksigner...
Unexpected parameter(s) after input APK (--key-pass)
Error: Process completed with exit code 1. ì´ë ‡ê²Œ ì—ëŸ¬ê°€ ë‚˜ì™€
ChatGPTì˜ ë§:
apksigner sign ëª…ë ¹ì–´ì—ì„œ --key-pass ì˜µì…˜ ì´í›„ì— ì…ë ¥ APKê°€ ì™€ì•¼ í•˜ëŠ”ë°, í˜„ì¬ --out ì˜µì…˜ì´ ë¨¼ì € ì˜¤ê³  ì…ë ¥ APKê°€ ë§ˆì§€ë§‰ì— ì˜¤ë„ë¡ ì‘ì„±ë¼ ìˆì–´ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí•œ ê±°ì•¼.

ğŸ” í•´ê²° ë°©ë²•
apksigner signì˜ ì˜¬ë°”ë¥¸ ëª…ë ¹ì–´ í˜•ì‹ì€ ë‹¤ìŒê³¼ ê°™ì•„:

sh
ë³µì‚¬
í¸ì§‘
apksigner sign --ks <keystore íŒŒì¼> \
  --ks-key-alias <alias> \
  --ks-pass pass:<keystore ë¹„ë°€ë²ˆí˜¸> \
  --key-pass pass:<í‚¤ ë¹„ë°€ë²ˆí˜¸> \
  <ì…ë ¥ APK>
ì¦‰, --out ì˜µì…˜ì´ í•„ìš” ì—†ì´, ì§ì ‘ ì›ë³¸ APKì— ì„œëª…í•˜ëŠ” ë°©ì‹ì´ì•¼.

âœ… ìˆ˜ì •ëœ ì½”ë“œ
ì•„ë˜ì²˜ëŸ¼ --out ì˜µì…˜ì„ ì œê±°í•˜ê³  ì…ë ¥ APKë¥¼ ë§ˆì§€ë§‰ì— ë„£ì–´ì¤˜.

yaml
ë³µì‚¬
í¸ì§‘
    - name: Sign APK using apksigner
      run: |
        echo "Signing with apksigner..."
        $ANDROID_HOME/build-tools/$BUILD_TOOLS_VERSION/apksigner sign --ks android-auto-key.keystore \
          --ks-key-alias ${{ secrets.ALIAS }} \
          --ks-pass pass:${{ secrets.KEYSTORE_PASSWORD }} \
          --key-pass pass:${{ secrets.KEY_PASSWORD }} \
          app/build/outputs/apk/full/release/app-full-release-aligned.apk \
        && echo "APK signing completed successfully."
ğŸ¯ ì´ë ‡ê²Œ ë³€ê²½í•œ ì´ìœ 
--out ì˜µì…˜ì´ í•„ìš” ì—†ìŒ â†’ ì›ë³¸ APKë¥¼ ì§ì ‘ ì„œëª…í•˜ë©´, ìë™ìœ¼ë¡œ ë®ì–´ì”Œì›Œì§.
app-full-release-aligned.apkë¥¼ ë§ˆì§€ë§‰ì— ë°°ì¹˜ â†’ apksignerì˜ ì…ë ¥ íŒŒì¼ ìœ„ì¹˜ë¥¼ ë§ì¶¤.
ì´ë ‡ê²Œ ìˆ˜ì •í•˜ë©´ Unexpected parameter(s) after input APK ì˜¤ë¥˜ ì—†ì´ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë  ê±°ì•¼! ğŸš€






ë‚˜ì˜ ë§:
name: Android CI

on:
  push:
    branches: ["master"]
  pull_request:
    branches: ["master"]
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3

    - name: Set up JDK 21
      uses: actions/setup-java@v3
      with:
        java-version: '21'
        distribution: 'temurin'
        cache: gradle

    - name: Generate Keystore (JKS â†’ PKCS12)
      run: |
        keytool -genkeypair -v \
          -keystore android-auto-key.keystore \
          -alias key \
          -keyalg RSA -keysize 2048 -validity 10000 \
          -dname "CN=Android, OU=Mobile, O=Company, L=City, ST=State, C=US" \
          -storepass "${{ secrets.KEYSTORE_PASSWORD }}" \
          -keypass "${{ secrets.KEY_PASSWORD }}"

        keytool -importkeystore \
          -srckeystore android-auto-key.keystore \
          -destkeystore android-auto-key.p12 \
          -srcstoretype JKS \
          -deststoretype PKCS12 \
          -srcstorepass "${{ secrets.KEYSTORE_PASSWORD }}" \
          -deststorepass "${{ secrets.KEYSTORE_PASSWORD }}"

        # Keystore íŒŒì¼ì„ Base64ë¡œ ë³€í™˜í•˜ì—¬ GitHub Secretsì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•¨
        base64 android-auto-key.p12 > android-auto-key.keystore.b64

    - name: Debug Keystore
      run: |
        echo "Checking Keystore file..."
        ls -lh android-auto-key.keystore

    - name: Build release APK
      run: ./gradlew app:assembleFullRelease

    - name: Setup build tool version variable
      shell: bash
      run: |
        BUILD_TOOLS_VERSION=$(ls /usr/local/lib/android/sdk/build-tools/ | tail -n 1)
        echo "BUILD_TOOLS_VERSION=$BUILD_TOOLS_VERSION" >> $GITHUB_ENV
        echo "Last build tool version is: $BUILD_TOOLS_VERSION"

    - name: Debug APK before signing
      run: |
        echo "Checking APK files before signing..."
        ls -lh app/build/outputs/apk/full/release/

    - name: Align APK
      run: |
        echo "Running zipalign..."
        $ANDROID_HOME/build-tools/$BUILD_TOOLS_VERSION/zipalign -v 4 \
          app/build/outputs/apk/full/release/app-full-release-unsigned.apk \
          app/build/outputs/apk/full/release/app-full-release-aligned.apk \
        && echo "zipalign completed successfully."

    - name: Debug APK after zipalign
      run: |
        echo "Checking APK files after zipalign..."
        ls -lh app/build/outputs/apk/full/release/

    - name: Sign APK using apksigner
      run: |
        echo "Signing with apksigner..."
        $ANDROID_HOME/build-tools/$BUILD_TOOLS_VERSION/apksigner sign --ks android-auto-key.keystore \
          --ks-key-alias ${{ secrets.ALIAS }} \
          --ks-pass pass:${{ secrets.KEYSTORE_PASSWORD }} \
          --key-pass pass:${{ secrets.KEY_PASSWORD }} \
          --out app/build/outputs/apk/full/release/app-full-release-signed.apk \
          app/build/outputs/apk/full/release/app-full-release-aligned.apk \
        && echo "APK signing completed successfully."

    - name: Debug APK after signing
      run: |
        echo "Checking APK files after signing..."
        ls -lh app/build/outputs/apk/full/release/

    - name: Upload APK Release
      uses: actions/upload-artifact@v4
      with:
        name: APK release generated
        path: app/build/outputs/apk/full/release/app-full-release-signed.apk ì—¬ê¸° ì—…ë°ì´íŠ¸ í•´ì¤˜ì„œ ë³´ì—¬ì¤˜
ChatGPTì˜ ë§:
ì—¬ê¸° ì—…ë°ì´íŠ¸ëœ Android CI ì›Œí¬í”Œë¡œìš°ì•¼.

zipalignì´ ì •ìƒì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ë¡œê·¸ ì¶”ê°€ âœ…
apksigner ì˜¤ë¥˜ ìˆ˜ì • (--out ì œê±°) âœ…
APK íŒŒì¼ ì¡´ì¬ ì—¬ë¶€ í™•ì¸ í›„ ì—…ë¡œë“œ âœ…
âœ… ì—…ë°ì´íŠ¸ëœ Android CI ì›Œí¬í”Œë¡œìš°
yaml
ë³µì‚¬
í¸ì§‘
name: Android CI

on:
  push:
    branches: ["master"]
  pull_request:
    branches: ["master"]
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3

    - name: Set up JDK 21
      uses: actions/setup-java@v3
      with:
        java-version: '21'
        distribution: 'temurin'
        cache: gradle

    - name: Generate Keystore (JKS â†’ PKCS12)
      run: |
        keytool -genkeypair -v \
          -keystore android-auto-key.keystore \
          -alias key \
          -keyalg RSA -keysize 2048 -validity 10000 \
          -dname "CN=Android, OU=Mobile, O=Company, L=City, ST=State, C=US" \
          -storepass "${{ secrets.KEYSTORE_PASSWORD }}" \
          -keypass "${{ secrets.KEY_PASSWORD }}"

        keytool -importkeystore \
          -srckeystore android-auto-key.keystore \
          -destkeystore android-auto-key.p12 \
          -srcstoretype JKS \
          -deststoretype PKCS12 \
          -srcstorepass "${{ secrets.KEYSTORE_PASSWORD }}" \
          -deststorepass "${{ secrets.KEYSTORE_PASSWORD }}"

        # Keystore íŒŒì¼ì„ Base64ë¡œ ë³€í™˜í•˜ì—¬ GitHub Secretsì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•¨
        base64 android-auto-key.p12 > android-auto-key.keystore.b64

    - name: Debug Keystore
      run: |
        echo "Checking Keystore file..."
        ls -lh android-auto-key.keystore

    - name: Build release APK
      run: ./gradlew app:assembleFullRelease

    - name: Setup build tool version variable
      shell: bash
      run: |
        BUILD_TOOLS_VERSION=$(ls /usr/local/lib/android/sdk/build-tools/ | tail -n 1)
        echo "BUILD_TOOLS_VERSION=$BUILD_TOOLS_VERSION" >> $GITHUB_ENV
        echo "Last build tool version is: $BUILD_TOOLS_VERSION"

    - name: Debug APK before signing
      run: |
        echo "Checking APK files before signing..."
        ls -lh app/build/outputs/apk/full/release/

    - name: Align APK
      run: |
        echo "Running zipalign..."
        $ANDROID_HOME/build-tools/$BUILD_TOOLS_VERSION/zipalign -v 4 \
          app/build/outputs/apk/full/release/app-full-release-unsigned.apk \
          app/build/outputs/apk/full/release/app-full-release-aligned.apk \
        && echo "zipalign completed successfully."

    - name: Debug APK after zipalign
      run: |
        echo "Checking APK files after zipalign..."
        ls -lh app/build/outputs/apk/full/release/

    - name: Sign APK using apksigner
      run: |
        echo "Signing with apksigner..."
        $ANDROID_HOME/build-tools/$BUILD_TOOLS_VERSION/apksigner sign --ks android-auto-key.keystore \
          --ks-key-alias ${{ secrets.ALIAS }} \
          --ks-pass pass:${{ secrets.KEYSTORE_PASSWORD }} \
          --key-pass pass:${{ secrets.KEY_PASSWORD }} \
          app/build/outputs/apk/full/release/app-full-release-aligned.apk \
        && echo "APK signing completed successfully."

    - name: Debug APK after signing
      run: |
        echo "Checking APK files after signing..."
        ls -lh app/build/outputs/apk/full/release/

    - name: Verify Signed APK
      run: |
        echo "Verifying signed APK..."
        $ANDROID_HOME/build-tools/$BUILD_TOOLS_VERSION/apksigner verify \
          --print-certs app/build/outputs/apk/full/release/app-full-release-aligned.apk \
        && echo "APK verification successful."

    - name: Upload APK Release
      uses: actions/upload-artifact@v4
      with:
        name: APK release generated
        path: app/build/outputs/apk/full/release/app-full-release-aligned.apk
ğŸ”¥ ì—…ë°ì´íŠ¸ëœ ë¶€ë¶„
zipalign ì™„ë£Œ ë¡œê·¸ ì¶”ê°€

&& echo "zipalign completed successfully."
apksigner ì˜¤ë¥˜ ìˆ˜ì •

--out ì œê±°
app-full-release-aligned.apkë¥¼ ì§ì ‘ ì„œëª…
APK ì„œëª… ê²€ì¦ ì¶”ê°€

apksigner verify --print-certs
íŒŒì¼ ì—…ë¡œë“œ ê²½ë¡œ ë³€ê²½

ì„œëª…ëœ app-full-release-aligned.apkë¥¼ ì—…ë¡œë“œ
ì´ì œ ì •ìƒì ìœ¼ë¡œ APKê°€ ë¹Œë“œë˜ê³ , zipalign & ì„œëª…ì´ ì™„ë£Œëœ í›„ ì—…ë¡œë“œë  ê±°ì•¼! ğŸš€






ë‚˜ì˜ ë§:
Run echo "Signing with apksigner..."
  echo "Signing with apksigner..."
  $ANDROID_HOME/build-tools/$BUILD_TOOLS_VERSION/apksigner sign --ks android-auto-key.keystore \
    --ks-key-alias  \
    --ks-pass pass:*** \
    --key-pass pass:*** \
    app/build/outputs/apk/full/release/app-full-release-aligned.apk \
  && echo "APK signing completed successfully."
  shell: /usr/bin/bash -e {0}
  env:
    JAVA_HOME: /opt/hostedtoolcache/Java_Temurin-Hotspot_jdk/21.0.6-7/x64
    JAVA_HOME_21_X64: /opt/hostedtoolcache/Java_Temurin-Hotspot_jdk/21.0.6-7/x64
    BUILD_TOOLS_VERSION: 35.0.1
Signing with apksigner...
Unexpected parameter(s) after input APK (--key-pass)
Error: Process completed with exit code 1. ì—¬ì „íˆ ì—ëŸ¬
ChatGPTì˜ ë§:
apksigner sign ëª…ë ¹ì–´ì—ì„œ --key-pass ì˜µì…˜ì´ ì˜ˆìƒì¹˜ ëª»í•œ ìœ„ì¹˜ì— ìˆì–´ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ” ê±°ì•¼.
ì˜¬ë°”ë¥¸ apksigner sign ëª…ë ¹ì–´ì˜ í˜•ì‹ì€ ë‹¤ìŒê³¼ ê°™ì•„:

sh
ë³µì‚¬
í¸ì§‘
apksigner sign --ks <keystore íŒŒì¼> \
  --ks-key-alias <alias> \
  --ks-pass pass:<keystore ë¹„ë°€ë²ˆí˜¸> \
  --key-pass pass:<key ë¹„ë°€ë²ˆí˜¸> \
  <ì„œëª…í•  APK íŒŒì¼>
âœ… ìˆ˜ì •í•´ì•¼ í•  ì 
--key-passëŠ” --ks-pass ë‹¤ìŒì— ì™€ì•¼ í•´.
--out <ì¶œë ¥ APK> ì˜µì…˜ì„ ë¹¼ê³  ê¸°ì¡´ APKë¥¼ ë®ì–´ì“°ê¸° í•´ì•¼ í•´.
ğŸ”¥ ì˜¬ë°”ë¥¸ apksigner sign ëª…ë ¹ì–´
yaml
ë³µì‚¬
í¸ì§‘
- name: Sign APK using apksigner
  run: |
    echo "Signing with apksigner..."
    $ANDROID_HOME/build-tools/$BUILD_TOOLS_VERSION/apksigner sign \
      --ks android-auto-key.keystore \
      --ks-key-alias ${{ secrets.ALIAS }} \
      --ks-pass pass:${{ secrets.KEYSTORE_PASSWORD }} \
      --key-pass pass:${{ secrets.KEY_PASSWORD }} \
      app/build/outputs/apk/full/release/app-full-release-aligned.apk \
    && echo "APK signing completed successfully."
ì´ì œ ë‹¤ì‹œ ì‹¤í–‰í•˜ë©´ ì •ìƒì ìœ¼ë¡œ ì„œëª…ë  ê±°ì•¼! ğŸš€






ë‚˜ì˜ ë§:
name: Android CI

on:
  push:
    branches: ["master"]
  pull_request:
    branches: ["master"]
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3

    - name: Set up JDK 21
      uses: actions/setup-java@v3
      with:
        java-version: '21'
        distribution: 'temurin'
        cache: gradle

    - name: Generate Keystore (JKS â†’ PKCS12)
      run: |
        keytool -genkeypair -v \
          -keystore android-auto-key.keystore \
          -alias key \
          -keyalg RSA -keysize 2048 -validity 10000 \
          -dname "CN=Android, OU=Mobile, O=Company, L=City, ST=State, C=US" \
          -storepass "${{ secrets.KEYSTORE_PASSWORD }}" \
          -keypass "${{ secrets.KEY_PASSWORD }}"

        keytool -importkeystore \
          -srckeystore android-auto-key.keystore \
          -destkeystore android-auto-key.p12 \
          -srcstoretype JKS \
          -deststoretype PKCS12 \
          -srcstorepass "${{ secrets.KEYSTORE_PASSWORD }}" \
          -deststorepass "${{ secrets.KEYSTORE_PASSWORD }}"

        # Keystore íŒŒì¼ì„ Base64ë¡œ ë³€í™˜í•˜ì—¬ GitHub Secretsì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•¨
        base64 android-auto-key.p12 > android-auto-key.keystore.b64

    - name: Debug Keystore
      run: |
        echo "Checking Keystore file..."
        ls -lh android-auto-key.keystore

    - name: Build release APK
      run: ./gradlew app:assembleFullRelease

    - name: Setup build tool version variable
      shell: bash
      run: |
        BUILD_TOOLS_VERSION=$(ls /usr/local/lib/android/sdk/build-tools/ | tail -n 1)
        echo "BUILD_TOOLS_VERSION=$BUILD_TOOLS_VERSION" >> $GITHUB_ENV
        echo "Last build tool version is: $BUILD_TOOLS_VERSION"

    - name: Debug APK before signing
      run: |
        echo "Checking APK files before signing..."
        ls -lh app/build/outputs/apk/full/release/

    - name: Align APK
      run: |
        echo "Running zipalign..."
        $ANDROID_HOME/build-tools/$BUILD_TOOLS_VERSION/zipalign -v 4 \
          app/build/outputs/apk/full/release/app-full-release-unsigned.apk \
          app/build/outputs/apk/full/release/app-full-release-aligned.apk \
        && echo "zipalign completed successfully."

    - name: Debug APK after zipalign
      run: |
        echo "Checking APK files after zipalign..."
        ls -lh app/build/outputs/apk/full/release/

    - name: Sign APK using apksigner
      run: |
        echo "Signing with apksigner..."
        $ANDROID_HOME/build-tools/$BUILD_TOOLS_VERSION/apksigner sign --ks android-auto-key.keystore \
          --ks-key-alias ${{ secrets.ALIAS }} \
          --ks-pass pass:${{ secrets.KEYSTORE_PASSWORD }} \
          --key-pass pass:${{ secrets.KEY_PASSWORD }} \
          app/build/outputs/apk/full/release/app-full-release-aligned.apk \
        && echo "APK signing completed successfully."

    - name: Debug APK after signing
      run: |
        echo "Checking APK files after signing..."
        ls -lh app/build/outputs/apk/full/release/

    - name: Verify Signed APK
      run: |
        echo "Verifying signed APK..."
        $ANDROID_HOME/build-tools/$BUILD_TOOLS_VERSION/apksigner verify \
          --print-certs app/build/outputs/apk/full/release/app-full-release-aligned.apk \
        && echo "APK verification successful."

    - name: Upload APK Release
      uses: actions/upload-artifact@v4
      with:
        name: APK release generated
        path: app/build/outputs/apk/full/release/app-full-release-aligned.apk ì—¬ê¸° ìˆ˜ì •í•´ì„œ ì•Œë ¤ì¤˜
ChatGPTì˜ ë§:
Edited Android Ci Workflow
ì—…ë°ì´íŠ¸ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤! app-full-release-signed.apk íŒŒì¼ì„ ì˜¬ë¦¬ë„ë¡ ìˆ˜ì •í–ˆìœ¼ë©°, apksigner ëª…ë ¹ì–´ì˜ --out ì˜µì…˜ë„ ë°˜ì˜í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹¤í–‰í•´ë³´ê³  ë¬¸ì œê°€ ìˆìœ¼ë©´ ì•Œë ¤ì£¼ì„¸ìš”! ğŸš€











ê²€ìƒ‰

ì´ì„±

ChatGPTëŠ” ì‹¤ìˆ˜ë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¤‘ìš”í•œ ì •ë³´ë¥¼ í™•ì¸í•˜ì„¸ìš”.
?


Android Ci Workflow







1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
name: Android CI

on:
  push:
    branches: ["master"]
  pull_request:
    branches: ["master"]
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3

    - name: Set up JDK 21
      uses: actions/setup-java@v3
      with:
        java-version: '21'
        distribution: 'temurin'
        cache: gradle

    - name: Generate Keystore (JKS â†’ PKCS12)
      run: |
        keytool -genkeypair -v \
          -keystore android-auto-key.keystore \
          -alias key \
          -keyalg RSA -keysize 2048 -validity 10000 \
          -dname "CN=Android, OU=Mobile, O=Company, L=City, ST=State, C=US" \
          -storepass "${{ secrets.KEYSTORE_PASSWORD }}" \
          -keypass "${{ secrets.KEY_PASSWORD }}"

        keytool -importkeystore \
          -srckeystore android-auto-key.keystore \
          -destkeystore android-auto-key.p12 \
          -srcstoretype JKS \
          -deststoretype PKCS12 \
          -srcstorepass "${{ secrets.KEYSTORE_PASSWORD }}" \
          -deststorepass "${{ secrets.KEYSTORE_PASSWORD }}"

        # Keystore íŒŒì¼ì„ Base64ë¡œ ë³€í™˜í•˜ì—¬ GitHub Secretsì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•¨
        base64 android-auto-key.p12 > android-auto-key.keystore.b64

    - name: Debug Keystore
      run: |
        echo "Checking Keystore file..."
        ls -lh android-auto-key.keystore

    - name: Build release APK
      run: ./gradlew app:assembleFullRelease

    - name: Setup build tool version variable
      shell: bash
      run: |
        BUILD_TOOLS_VERSION=$(ls /usr/local/lib/android/sdk/build-tools/ | tail -n 1)
        echo "BUILD_TOOLS_VERSION=$BUILD_TOOLS_VERSION" >> $GITHUB_ENV
        echo "Last build tool version is: $BUILD_TOOLS_VERSION"

    - name: Debug APK before signing
      run: |
        echo "Checking APK files before signing..."
        ls -lh app/build/outputs/apk/full/release/

    - name: Align APK
      run: |
        echo "Running zipalign..."
        $ANDROID_HOME/build-tools/$BUILD_TOOLS_VERSION/zipalign -v 4 \
          app/build/outputs/apk/full/release/app-full-release-unsigned.apk \
          app/build/outputs/apk/full/release/app-full-release-aligned.apk \
        && echo "zipalign completed successfully."

    - name: Debug APK after zipalign
      run: |
        echo "Checking APK files after zipalign..."
        ls -lh app/build/outputs/apk/full/release/

    - name: Sign APK using apksigner
      run: |
        echo "Signing with apksigner..."
        $ANDROID_HOME/build-tools/$BUILD_TOOLS_VERSION/apksigner sign \
          --ks android-auto-key.keystore \
          --ks-key-alias ${{ secrets.ALIAS }} \
          --ks-pass pass:${{ secrets.KEYSTORE_PASSWORD }} \
          --key-pass pass:${{ secrets.KEY_PASSWORD }} \
          --out app/build/outputs/apk/full/release/app-full-release-signed.apk \
          app/build/outputs/apk/full/release/app-full-release-aligned.apk \
        && echo "APK signing completed successfully."

    - name: Debug APK after signing
      run: |
        echo "Checking APK files after signing..."
        ls -lh app/build/outputs/apk/full/release/

    - name: Verify Signed APK
      run: |
        echo "Verifying signed APK..."
        $ANDROID_HOME/build-tools/$BUILD_TOOLS_VERSION/apksigner verify \
          --print-certs app/build/outputs/apk/full/release/app-full-release-signed.apk \
        && echo "APK verification successful."

    - name: Upload APK Release
      uses: actions/upload-artifact@v4
      with:
        name: APK release generated
        path: app/build/outputs/apk/full/release/app-full-release-signed.apk
ChatGPTì˜ ë§: ì—…ë°ì´íŠ¸ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤! `app-full-release-signed.apk` íŒŒì¼ì„ ì˜¬ë¦¬ë„ë¡ ìˆ˜ì •í–ˆìœ¼ë©°, `apksigner` ëª…ë ¹ì–´ì˜ `--out` ì˜µì…˜ë„ ë°˜ì˜í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹¤í–‰í•´ë³´ê³  ë¬¸ì œê°€ ìˆìœ¼ë©´ ì•Œë ¤ì£¼ì„¸ìš”! ğŸš€
